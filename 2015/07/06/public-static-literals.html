<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="It's a common practice to make constants public in order to avoid duplication, but it's a bad practice, so use objects instead." /> <meta name="keywords" content="public static, public static java, public static literals, static constants java, static literals java" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-07-06 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Public Static Literals ... Are Not a Solution for Data Duplication"/> <meta name="twitter:description" property="og:description" content="It's a common practice to make constants public in order to avoid duplication, but it's a bad practice, so use objects instead."/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/07/06/public-static-literals.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?cf04cec28ae"/> <link rel="apple-touch-icon" href="/favicon.ico?cf04cec28ae"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?cf04cec28ae"/> <link rel="stylesheet" href="/css/icons.css?cf04cec28ae"/> <link rel="canonical" href="https://www.yegor256.com/2015/07/06/public-static-literals.html" /> <title>Public Static Literals ... Are Not a Solution for Data Duplication </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/07/the-shining.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/07/the-shining.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='600'/> <meta name='twitter:image:height' content='600'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='The Shining (1980) by Stanley Kubrick'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;362</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Art</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке о политике в России, Украине и мире">Политика</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/07/06/public-static-literals.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2015/07/06/public-static-literals.html</code></p><h1 itemprop="name headline mainEntityOfPage">Public Static Literals ... Are Not a Solution for Data Duplication</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover-eo1.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;2.5</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-07-06T00:00:00+00:00"> 6 July 2015 </time> </li> <li class="desktop-only" itemprop="locationCreated">Palo Alto, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/07/06/public-static-literals.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><a href='/tag/java.html' class='tag notranslate'><img src='/images/java-icon.svg' alt='Java'/>java</a> <a href='/tag/oop.html' class='tag notranslate'><img src='/images/books/elegant-objects/cactus.svg' alt='OOP'/>oop</a></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/07/06/public-static-literals.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/07/06/public-static-literals.html&amp;text=Public+Static+Literals+...+Are+Not+a+Solution+for+Data+Duplication" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/07/06/public-static-literals.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/07/06/public-static-literals.html%3F2015-27&amp;title=Public+Static+Literals+...+Are+Not+a+Solution+for+Data+Duplication" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/07/06/public-static-literals.html%3F2015-27&amp;t=Public+Static+Literals+...+Are+Not+a+Solution+for+Data+Duplication" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>I have a <code class="highlighter-rouge">new String(array,"UTF-8")</code> in one place and exactly the same code in another place in my app. Actually, I may have it in many places. And every time, I have to use that <code class="highlighter-rouge">"UTF-8"</code> constant in order to create a <code class="highlighter-rouge">String</code> from a byte array. It would be very convenient to define it once somewhere and reuse it, just like Apache Commons is doing; see <a href="https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/CharEncoding.html#UTF_8"><code class="highlighter-rouge">CharEncoding.UTF_8</code></a> (There are many other static literals there). These guys are setting a bad example! <code class="highlighter-rouge">public</code> <code class="highlighter-rouge">static</code> “properties” are as bad as <a href="/2014/05/05/oop-alternative-to-utility-classes.html">utility classes</a>.</p><figure class="jb_picture"><img itemprop="image" alt="The Shining (1980) by Stanley Kubrick" src="/images/2015/07/the-shining.jpg" longdesc="#3741e70e" /><figcaption id="3741e70e">The Shining (1980) by Stanley Kubrick</figcaption></figure><p>Here is what I’m talking about, specifically:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">org.apache.commons.lang3</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CharEncoding</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">UTF_8</span> <span class="o">=</span> <span class="s">"UTF-8"</span><span class="o">;</span>
  <span class="c1">// some other methods and properties</span>
<span class="o">}</span></code></pre></figure><p>Now, when I need to create a <code class="highlighter-rouge">String</code> from a byte array, I use this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.apache.commons.lang3.CharEncoding</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="n">array</span><span class="o">,</span> <span class="nc">CharEncoding</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">);</span></code></pre></figure><p>Let’s say I want to convert a <code class="highlighter-rouge">String</code> into a byte array:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.apache.commons.lang3.CharEncoding</span><span class="o">;</span>
<span class="kt">byte</span><span class="o">[]</span> <span class="n">array</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">CharEncoding</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">);</span></code></pre></figure><p>Looks convenient, right? This is what the designers of Apache Commons think (one of the most popular but simply <em>terrible</em> libraries in the Java world). I encourage you to think differently. I can’t tell you to stop using Apache Commons, because we just don’t have a better alternative (<a href="https://www.cactoos.org">yet!</a>). But in your own code, don’t use public static properties—ever. Even if this code may look convenient to you, it’s a very bad design.</p><aside class="quote">Every time you see data duplication, start thinking about the functionality you’re duplicating. </aside><p>The reason why is very similar to <a href="/2015/02/26/composable-decorators.html">utility classes</a> with public static methods—they are unbreakable hard-coded dependencies. Once you use that <code class="highlighter-rouge">CharEncoding.UTF_8</code>, your object starts to depend on this data, and its user (the user of your object) can’t break this dependency. You may say that this is your intention, in the case of a <code class="highlighter-rouge">"UTF-8"</code> constant—to make sure that Unicode is specifically and exclusively being used. In this particular example, this may be true, but look at it from a more global perspective.</p><p>Let me show you the alternative I have in mind before we continue. Here is what I’m suggesting instead to convert a byte array into a <code class="highlighter-rouge">String</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">String</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UTF8String</span><span class="o">(</span><span class="n">array</span><span class="o">);</span></code></pre></figure><p>It’s pseudo-code, since Java designers made class <code class="highlighter-rouge">String</code> final and we can’t really extend it and create <code class="highlighter-rouge">UTF8String</code>, but you get the idea. In the real world, this would look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">String</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UTF8String</span><span class="o">(</span><span class="n">array</span><span class="o">).</span><span class="na">toString</span><span class="o">();</span></code></pre></figure><p>As you see, we encapsulate the “UTF-8” constant somewhere inside the class <code class="highlighter-rouge">UTF8String</code>, and its users have no idea how exactly this “byte array to string” conversion is happening.</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=3blBn65iQmU"><div class="box"> <img src="https://i.ytimg.com/vi/3blBn65iQmU/mqdefault.jpg" alt="YouTube video #3blBn65iQmU" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Why Private Static Literals are Evil? (Webinar #48); 4 December 2019.</div></aside><p>By introducing <code class="highlighter-rouge">UTF8String</code>, we solved the problem of “UTF-8” literal duplication. But we did it in a proper object-oriented way—we encapsulated the functionality inside a class and let everybody instantiate its objects and use them. We resolved the problem of functionality duplication, not just data duplication.</p><p>Placing data into one shared place (<code class="highlighter-rouge">CharEncoding.UTF_8</code>) doesn’t really solve the duplication problem; it actually makes it <em>worse</em>, mostly because it encourages everybody to duplicate functionality using the same piece of <a href="/2016/11/21/naked-data.html">shared data</a>.</p><p>My point here is that every time you see that you have some data duplication in your application, start thinking about the functionality you’re duplicating. You will easily find the code that is repeated again and again. Make a new class for this code and place the data there, as a <code class="highlighter-rouge">private</code> property (or private <code class="highlighter-rouge">static</code> property). That’s how you will improve your design and truly get rid of duplication.</p><p>PS. You can use a method instead of a class, but not a static literal.</p><p>PPS. You can also use enums, but only <a href="https://www.g4s8.wtf/posts/2020-12-26-enum-objects/#comment-5205846133">this way</a>.</p><blockquote class="twitter-tweet"><p lang="en" dir="ltr">How do you get rid of the duplication of magic numbers (it&#39;s Ruby)? <a href="https://twitter.com/hashtag/elegantobjects?src=hash&amp;ref_src=twsrc%5Etfw">#elegantobjects</a><br /><br />class Time<br /> def hours<br /> msec / (60 * 60 * 1000)<br /> end<br /> def days<br /> msec / (24 * 60 * 60 * 1000)<br /> end<br />end</p>&mdash; Yegor Bugayenko (@yegor256) <a href="https://twitter.com/yegor256/status/1221378774618595329?ref_src=twsrc%5Etfw">January 26, 2020</a></blockquote> <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2021</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="https://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge" /></a> &nbsp; <a href="https://github.com/yegor256/blog/stargazers"> <img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square" alt="GitHub stars" /></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?cf04cec28ae"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>

<!DOCTYPE html> <html xmlns="https://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="ActiveRecord is a popular design pattern that seemed to be better than ORM, though from an object thinking standpoint it is even worse." /> <meta name="keywords" content="ActiveRecord, ActiveRecord ORM, ActiveRecord anti-pattern, ActiveRecord design pattern, ActiveRecord java" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-07-26 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="ActiveRecord Is Even Worse Than ORM"/> <meta name="twitter:description" property="og:description" content="ActiveRecord is a popular design pattern that seemed to be better than ORM, though from an object thinking standpoint it is even worse."/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/07/26/active-record.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?b4277130342"/> <link rel="apple-touch-icon" href="/favicon.ico?b4277130342"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?b4277130342"/> <link rel="stylesheet" href="/css/icons.css?b4277130342"/> <link rel="canonical" href="https://www.yegor256.com/2016/07/26/active-record.html" /> <title>ActiveRecord Is Even Worse Than ORM</title> <meta name='og:image' content='https://www.yegor256.com/images/2016/07/en-duva-satt-pa-engren.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/07/en-duva-satt-pa-engren.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='670'/> <meta name='twitter:image:height' content='670'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='En duva satt på en gren och funderade på tillvaron (2014) by Roy Andersson'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;396</a></li> <li ><a href="/teaching.html" title="My courses and lectures">Teaching</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/research.html" title="My research directions and progress">Research</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Art</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке о политике в России, Украине и мире">Политика</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/07/26/active-record.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2016/07/26/active-record.html</code></p><h1 itemprop="name headline mainEntityOfPage">ActiveRecord Is Even Worse Than ORM</h1><aside class='book'><a href='https://amzn.to/2pyceWc'><img src='/images/books/elegant-objects/cover-eo2.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='https://amzn.to/2pyceWc'>Section&nbsp;6.5</a><br/> of my book<a href='https://amzn.to/2pyceWc'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-07-26T00:00:00+00:00"> 26 July 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Palo Alto, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2016/07/26/active-record.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="subline"> <li title="The page is translated by ChatGPT from English to a few languages"> Translated by <i class="icon icon-chatgpt notranslate" aria-hidden="true"></i> to </li> <li title="Click to see this page translated to Chinese"> <a href='https://www.yegor256.com/zh/2016/07/26/active-record.html'>中文</a> </li> <li title="Click to see this page translated to Russian"> <a href='https://www.yegor256.com/ru/2016/07/26/active-record.html'>русский</a> </li></ul><ul class="subline"> <li>Discussed at:</li> <li><a href="https://dzone.com/articles/activerecord-is-even-worse-than-orm">dzone</a></li></ul><p class="unprintable"><a href='/tag/oop.html' class='tag notranslate'><img src='/images/icons/cactus.svg' alt='OOP'/>oop</a></p><nav class="buttons notranslate desktop-only"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/07/26/active-record.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/07/26/active-record.html&amp;text=ActiveRecord+Is+Even+Worse+Than+ORM" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/07/26/active-record.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="https://reddit.com/submit?url=https://www.yegor256.com/2016/07/26/active-record.html%3F2016-30&amp;title=ActiveRecord+Is+Even+Worse+Than+ORM" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="https://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/07/26/active-record.html%3F2016-30&amp;t=ActiveRecord+Is+Even+Worse+Than+ORM" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> <a href="#" title="Cite it via BibTeX" class="button" onclick="$('#bibtex').toggle(); return false;"> <i class="icon icon-tex notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><div id="bibtex" style="display: none"><p>Please, cite this blog post via <a href="https://www.bibtex.org/">BibTeX</a> as such:</p><pre style="color:#053c5e;">@misc&#123;bugayenko2016blog0726,
  author = &#123;Bugayenko, Yegor&#125;,
  title = &#123;&#123;ActiveRecord Is Even Worse Than ORM&#125;&#125;,
  howpublished = &#123;\url&#123;https://www.yegor256.com/160726g.html&#125;&#125;,
  year = &#123;2016&#125;,
  month = &#123;July&#125;,
  note = &#123;[Online; accessed 07-02-2024]&#125;
&#125;</pre></div><p>You probably remember what <a href="/2014/12/01/orm-offensive-anti-pattern.html">I think</a> about ORM, a very popular design pattern. In a nutshell, it encourages us to turn objects into <a href="/2016/07/06/data-transfer-object.html">DTOs</a>, which are anemic, passive, and not objects at all. The consequences are usually dramatic—the entire programming paradigm shifts from object-oriented to procedural. I’ve tried to explain this at a <a href="https://www.youtube.com/watch?v=aER4uwyFbqQ">JPoint</a> and <a href="https://www.youtube.com/watch?v=63tS3HNmhiE">JEEConf</a> this year. After each talk, a few people told me that what I’m suggesting is called <a href="https://en.wikipedia.org/wiki/Active_record_pattern">ActiveRecord</a> or <a href="https://msdn.microsoft.com/en-us/library/ff649690.aspx">Repository</a> patterns.</p><figure class="jb_picture"><img itemprop="image" alt="En duva satt på en gren och funderade på tillvaron (2014) by Roy Andersson" src="/images/2016/07/en-duva-satt-pa-engren.jpg" longdesc="#36f12aea" /><figcaption id="36f12aea">En duva satt på en gren och funderade på tillvaron (2014) by Roy Andersson</figcaption></figure><p>Moreover, they claimed that ActiveRecord actually solves the problem I’ve found in ORM. They said I should explain in my talks that what I’m offering (SQL-speaking objects) already exists and has a name: ActiveRecord.</p><p>I disagree. Moreover, I think that ActiveRecord is even worse than ORM.</p><aside class="quote">What’s even worse in ActiveRecord is that it hides the fact that objects are data containers. </aside><p>ORM consists of two parts: the session and <a href="/2016/07/06/data-transfer-object.html">DTOs</a>, also known as “entities.” The entities have no functionality; they are just primitive containers for the data transferred from and to the session. And that is what the problem is—objects don’t encapsulate but rather expose data. To understand why this is wrong and why it’s against the object paradigm, you can read <a href="/2014/09/16/getters-and-setters-are-evil.html">here</a>, <a href="/2016/04/05/printers-instead-of-getters.html">here</a>, <a href="/2014/12/01/orm-offensive-anti-pattern.html">here</a>, <a href="/2014/11/20/seven-virtues-of-good-object.html">here</a>, and <a href="/2016/07/06/data-transfer-object.html">here</a>. Now, let’s just agree that it’s very wrong and move on.</p><p>What solution is ActiveRecord proposing? How is it solving the problem? It moves the engine into the <em>parent class</em>, which all our entities inherit from. This is how we were supposed to save our entity to the database in the ORM scenario (pseudo-code):</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">book</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">"Java in a Nutshell"</span><span class="o">);</span>
<span class="n">session</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">book</span><span class="o">);</span>
</code></pre></div></div><p>And this is what we do with an ActiveRecord:</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">book</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">"Java in a Nutshell"</span><span class="o">);</span>
<span class="n">book</span><span class="o">.</span><span class="na">update</span><span class="o">();</span>
</code></pre></div></div><p>The method <code class="language-plaintext highlighter-rouge">update()</code> is defined in book’s parent class and uses book as a <em>data container</em>. When called, it fetches data from the container (the book) and updates the database. How is it different than ORM? There is absolutely no difference. The book is still a container that knows nothing about SQL and any persistence mechanisms.</p><p>What’s even worse in ActiveRecord, compared to ORM, is that it <em>hides</em> the fact that objects are data containers. A book, in the second snippet, <em>pretends</em> to be a <a href="/2014/11/20/seven-virtues-of-good-object.html">proper object</a>, while in reality it’s just a dumb data bag.</p><p>I believe this is what misguided those who were saying that my SQL-speaking objects concept is exactly the same as the ActiveRecord design pattern (or Repository, which is almost exactly the same).</p><p>No, it’s not.</p></div></article></div><div class="wrapper" aria-hidden="true"> <related-posts /></div><div class="disqus" role="complementary" aria-hidden="true"><p class="disqus_hint" > Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2024</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="https://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge" /></a> &nbsp; <a href="https://github.com/yegor256/blog/stargazers"> <img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square" alt="GitHub stars" /></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?b4277130342"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>

<!doctypehtml><html xmlns="https://www.w3.org/1999/xhtml"lang="en-US"xml:lang="en-US"itemscope=""itemtype="http://schema.org/WebSite"><meta charset="utf-8"><meta name="description"content="How do you back up your server data? I created this web service to get rid of backup servers entirely."><meta name="keywords"content="data pipeline, online backup, server data backup, server-side backup service, threecopies"><meta name="viewport"content="width=device-width,minimum-scale=1,initial-scale=1"><meta name="google-site-verification"content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8"><meta name="author"content="Yegor Bugayenko"><meta name="article:published_time"content="2017-09-26 00:00:00 +0000"><meta name="yandex-verification"content="7d2a0afee14d72bc"><meta name="og:site_name"content="Yegor Bugayenko"><meta name="og:type"content="article"><meta name="og:locale"content="en_US"><meta name="twitter:account_id"content="4503599630178231"><meta name="twitter:creator"content="@yegor256"><meta name="twitter:site"content="@yegor256"><meta name="twitter:title"property="og:title"content="ThreeCopies.com&amp;mdash;Server-Side Data Backup Service"><meta name="twitter:description"property="og:description"content="How do you back up your server data? I created this web service to get rid of backup servers entirely."><meta name="twitter:url"property="og:url"content="https://www.yegor256.com/2017/09/26/threecopies-server-data-backup.html"><meta name="telegram:channel"content="AAAAAEJFMRzsRTRxM3ec6A"><link rel="search"type="application/opensearchdescription+xml"href="/opensearch.xml"title="yegor256"><link rel="icon"href="/favicon.ico?3725104"type="image/x-icon"><link rel="shortcut icon"href="/favicon.ico?3725104"><link rel="apple-touch-icon"href="/favicon.ico?3725104"><link rel="alternate"type="application/rss+xml"title="RSS for yegor256.com"href="https://www.yegor256.com/rss.xml"><link rel="stylesheet"href="/css/layout.css?3725104"><link rel="stylesheet"href="/css/icons.css?3725104"><link rel="canonical"href="https://www.yegor256.com/2017/09/26/threecopies-server-data-backup.html"><title>ThreeCopies.com&mdash;Server-Side Data Backup Service</title><meta name="og:image"content="https://www.yegor256.com/images/2017/09/threecopies.jpg"><meta name="twitter:image"content="https://www.yegor256.com/images/2017/09/threecopies.jpg"><meta name="og:image:width"content="1466"><meta name="twitter:image:width"content="1466"><meta name="og:image:height"content="1132"><meta name="twitter:image:height"content="1132"><meta name="twitter:card"content="summary_large_image"><meta name="twitter:image:alt"content="Main picture"><div class="wrapper"><aside class="header-toggle unprintable"id="header-toggle"title="Show the menu"onclick='$("#header").show(),$("#header-toggle").hide()'>&#9776;</aside><header class="header"id="header"><div class="face"><a href="/about-me.html#form"class="sub"title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html"style="position:relative"><img src="/images/face-256x256.jpg"class="photo"alt="Yegor Bugayenko"></a></div><nav><ul class="menu social notranslate"><li><a href="https://twitter.com/intent/follow?screen_name=yegor256"rel="nofollow"title="Follow me on Twitter"><i class="icon icon-twitter notranslate"aria-hidden="true"></i></a><li><a href="/rss.xml"rel="nofollow"title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://github.com/yegor256"rel="nofollow"title="My GitHub profile"><i class="icon icon-github notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="http://stackoverflow.com/users/187141/yegor256"rel="nofollow"title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://www.facebook.com/yegor256"rel="nofollow"title="Follow me on Facebook"><i class="icon icon-facebook notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://instagram.com/yegor256"rel="nofollow"title="Follow me on Instagram"><i class="icon icon-instagram notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://www.linkedin.com/in/yegor256"rel="nofollow"title="My LinkedIn profile"><i class="icon icon-linkedin notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://www.youtube.com/c/yegor256?sub_confirmation=1"rel="nofollow"title="My Youtube video channel"><i class="icon icon-youtube notranslate"aria-hidden="true"></i></a><li><a href="https://soundcloud.com/yegor256"rel="nofollow"title="My podcast"><i class="icon icon-podcast notranslate"aria-hidden="true"></i></a><li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721"rel="nofollow"title="My iTunes podcast"><i class="icon icon-itunes notranslate"aria-hidden="true"></i></a><li><a href="https://t.me/yegor256news"rel="nofollow"title="My Telegram public channel"><i class="icon icon-telegram notranslate"aria-hidden="true"></i></a><li><a href="mailto:blog@yegor256.com"rel="nofollow"title="Email me any time"><i class="icon icon-mail notranslate"aria-hidden="true"></i></a></ul><ul class="menu"><li><a href="/"title="Home page">Home</a><li><a href="/best.html"title="Best articles to read">12&#160;Best</a><li><a href="/contents.html"title="The contents of the entire blog">All&#160;485</a><li><a href="/teaching.html"title="My courses and lectures">Teaching</a><li><a href="/talks.html"title="Future and past conference talks">Talks</a><li><a href="/books.html"title="The books I wrote">Books</a><li><a href="/research.html"title="My research directions and progress">Research</a><li><a href="/pets.html"title="My loved pet projects">Pets</a><li><a href="/trainings.html"title="On-site trainings">Trainings</a><li><a href="https://www.iccq.ru"title="International Conference on Code Quality">ICCQ</a><li><a href="https://www.kaicode.org"title="Open Source Festival">KaiCode</a><li><a href="/testimonials.html"title="What some people say about me">Testimonials</a><li><a href="/shift-m.html"title="Audio podcast about project management">Shift-M</a><li><a href="/paintings.html"title="My paintings for sale">Art</a></ul></nav><div class="search"><form action="https://www.google.com/search"itemprop="potentialAction"itemscope=""itemtype="http://schema.org/SearchAction"><meta itemprop="target"content="https://www.google.com/search?q={q}"><input name="sitesearch"value="yegor256.com"type="hidden"> <input itemprop="query-input"id="search-query"class="field field-text"required="required"onfocus='$(".google").css("visibility","visible")'name="q"placeholder="Type üÑµ to search"autocomplete="off"> <input type="image"src="/images/google-search-icon.svg"class="google"title="Search via Google"alt="Search via Google"></form></div><div class="hot"><ul><li>We are organizing the <strong>6th <a href="https://www.iccq.ru/2026.html">ICCQ</a> conference</strong> in collaboration with <a href="https://www.iis.nsk.su/en">IIS</a> (Novosibirsk) and, hopefully, IEEE Computer Society. We're looking for volunteers to help us. If interested, please email at <a href="mailto:orgs@iccq.ru">orgs@iccq.ru</a> (attach your LinkedIn and GitHub profiles).<li>Are you familiar with open source and have a decent GitHub portfolio of contributions? <strong>We need freelancers</strong>, working remotely and paid by result, for <a href="https://www.eolang.org">EO</a>, a new programming language. Join our Telegram group, we'll discuss: <a href="https://t.me/eolang_org">@eolang_org</a>.</ul></div></header></div><section itemscope=""itemtype="http://schema.org/BlogPosting"><div class="wrapper"><header><p class="printable"><img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2017/09/26/threecopies-server-data-backup.html&amp;format=svg"style="width:125px;height:125px"alt="QR code"><p class="printable"><code itemprop="url">https://www.yegor256.com/170926.html</code><h1 itemprop="name headline mainEntityOfPage">ThreeCopies.com&mdash;Server-Side Data Backup Service</h1><ul class="subline"><li><time itemprop="datePublished"datetime="2017-09-26T00:00:00+00:00">26 September 2017</time><li class="desktop-only"itemprop="locationCreated">Odessa, Ukraine<li class="printable"itemscope=""itemprop="author"itemtype="http://schema.org/Person"><span itemprop="name">Yegor Bugayenko</span><li class="unprintable"><i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2017/09/26/threecopies-server-data-backup.html#disqus_thread"itemprop="discussionUrl">comments</a></ul><ul class="unprintable subline"><li title="The page is translated by ChatGPT from English to a few languages">Translated by <i class="icon icon-chatgpt notranslate"aria-hidden="true"></i> to<li title="Click to see this page translated to Chinese"><a href="https://www.yegor256.com/zh/2017/09/26/threecopies-server-data-backup.html">‰∏≠Êñá</a><li title="Click to see this page translated to Russian"><a href="https://www.yegor256.com/ru/2017/09/26/threecopies-server-data-backup.html">—Ä—É—Å—Å–∫–∏–π</a></ul><p class="unprintable"><a href="/tag/pets.html"class="tag notranslate">pets</a><nav class="buttons notranslate desktop-only"><a href="https://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2017/09/26/threecopies-server-data-backup.html"title="Share on Facebook"class="button"rel="nofollow"><span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate"aria-hidden="true"></i> </a><a href="https://twitter.com/share?url=https://www.yegor256.com/2017/09/26/threecopies-server-data-backup.html&amp;text=ThreeCopies.com%26mdash%3BServer-Side+Data+Backup+Service"title="Share on Twitter"class="button"rel="nofollow"><span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate"aria-hidden="true"></i> </a><a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2017/09/26/threecopies-server-data-backup.html"title="Share on LinkedIn"class="button"rel="nofollow"><span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate"aria-hidden="true"></i> </a><a href="https://reddit.com/submit?url=https://www.yegor256.com/2017/09/26/threecopies-server-data-backup.html%3F2017-39&amp;title=ThreeCopies.com%26mdash%3BServer-Side+Data+Backup+Service"title="Share on Reddit"class="button"rel="nofollow"><span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate"aria-hidden="true"></i> </a><a href="https://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2017/09/26/threecopies-server-data-backup.html%3F2017-39&amp;t=ThreeCopies.com%26mdash%3BServer-Side+Data+Backup+Service"title="Share on Hacker News"class="button"rel="nofollow"><span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate"aria-hidden="true"></i> </a><a href="#"title="Cite it via BibTeX"class="button"onclick='return $("#bibtex").toggle(),!1'><i class="icon icon-tex notranslate"aria-hidden="true"></i></a></nav></header><article class="main"itemprop="articleBody"><div><div id="bibtex"style="display:none"><p>Please, cite this blog post via <a href="https://www.bibtex.org/">BibTeX</a> as such:<pre style="color:#053c5e">@misc&#123;bugayenko2017blog0926,
  author = &#123;Bugayenko, Yegor&#125;,
  title = &#123;&#123;ThreeCopies.com&mdash;Server-Side Data Backup Service&#125;&#125;,
  howpublished = &#123;\url&#123;https://www.yegor256.com/170926.html&#125;&#125;,
  year = &#123;2017&#125;,
  month = &#123;sep&#125;,
  note = &#123;[Online; accessed 10-12-2025]&#125;
&#125;</pre></div><p>I have a number of data resources which exist in one place only and which I don‚Äôt really want to lose. For example, I have a hosted PHP website, and a MySQL database hosted at the same place. I also have a NoSQL database at Amazon DynamoDB, a PostgreSQL database at Heroku, and also‚Ä¶ Well, there are many of them. How to back them up was always a question for me.<figure class="jb_picture"><img itemprop="image"alt="Main picture"src="/images/2017/09/threecopies.jpg"></figure><p>The most straightforward way is to rent a cheap $15/mo server (or use an existing one) and configure Cron to run a custom bash script, which will pull the data from the MySQL database, package it, and upload it to some place where it will be safe, such as Amazon S3 bucket. Then, I would need another script for the PostgreSQL database, and another one for the FTP file archive, etc.<aside class="youtube"><a href="https://www.youtube.com/watch?v=KYd24FN58wg"><div class="box"><img src="https://i.ytimg.com/vi/KYd24FN58wg/mqdefault.jpg"alt="YouTube video #KYd24FN58wg"><div class="play"><i class="icon icon-play"></i></div></div></a><div>Object-Oriented Java Web App from Scratch in One Hour: ThreeCopies.com (Webinar #28); 4 October 2017.</div></aside><p>This is actually how I was doing it for years. The drawbacks of this solution were always the same:<ul><li>I needed to pay for the server.<li>I needed to make sure the server was always up and running (Linux is far from reliable).<li>I needed to back up my scripts too.<li>I needed to SSH to the server every time I wanted to change a script, remember where they were, how they start, etc.</ul><p>The biggest issue is that every single owner of a data source faces exactly the same set of problems. ‚ÄúWhy can‚Äôt I create a hosted solution for these scripts, to help everybody to back up their data,‚Äù I was asking myself for years. ‚ÄúWell, I can,‚Äù was the answer just a few weeks ago, and I created <a href="https://www.threecopies.com">ThreeCopies</a>.<p>It‚Äôs a very simple hosted executor of bash scripts, which you edit through a web interface. Then one of our servers starts a Docker container (<a href="https://hub.docker.com/r/yegor256/threecopies/">yegor256/threecopies</a> is the image, here is the <a href="https://github.com/yegor256/threecopies/blob/master/src/docker/Dockerfile"><code class="language-plaintext highlighter-rouge">Dockerfile</code></a>) and runs your script inside.<p>The script starts every hour, every day and every week. Hence the name: ‚Äúthree copies.‚Äù It‚Äôs good practice for data backup to create separate copies with different regularities. Also, you might want to put different data into different copies. To help your script understand which copy is running at any particular time we pass the <code class="language-plaintext highlighter-rouge">$period</code> environment variable into it, with the value of either <code class="language-plaintext highlighter-rouge">hour</code>, <code class="language-plaintext highlighter-rouge">day</code>, or <code class="language-plaintext highlighter-rouge">week</code>.<p>How your script pulls the data, packages it, and archives it, depends on the data. I created a short cheat sheet for most common scenarios. This is how I backup the MySQL database for <a href="https://www.thepmp.com">thePMP</a>, for example:<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># I don't want to back up every hour</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">period</span><span class="k">}</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"hour"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then </span><span class="nb">exit </span>0<span class="p">;</span> <span class="k">fi</span>

<span class="c"># I dump the entire database into the file</span>
mysqldump <span class="nt">--lock-tables</span><span class="o">=</span><span class="nb">false</span> <span class="nt">--host</span><span class="o">=</span>db.thepmp.com <span class="se">\</span>
  <span class="nt">--user</span><span class="o">=</span>thepmp <span class="nt">--password</span><span class="o">=</span><span class="k">*********</span> <span class="se">\</span>
  <span class="nt">--databases</span> thepmp <span class="o">&gt;</span> thepmp.sql

<span class="c"># I compress the file</span>
<span class="nv">tgz</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span><span class="nb">date</span> <span class="s2">"+%Y-%m-%d-%H-%M"</span><span class="si">)</span><span class="s2">.tgz"</span>
<span class="nb">tar </span>czf <span class="s2">"</span><span class="k">${</span><span class="nv">tgz</span><span class="k">}</span><span class="s2">"</span> thepmp.sql

<span class="c"># I upload it to Amazon S3 bucket</span>
<span class="nb">echo</span> <span class="s2">"[default]"</span> <span class="o">&gt;</span> ~/.s3cfg
<span class="nb">echo</span> <span class="s2">"access_key=AKIAICJKH*****CVLAFA"</span> <span class="o">&gt;&gt;</span> ~/.s3cfg
<span class="nb">echo</span> <span class="s2">"secret_key=yQv3g3ao654Ns**********H1xQSfZlTkseA0haG"</span> <span class="o">&gt;&gt;</span> ~/.s3cfg
s3cmd <span class="nt">--no-progress</span> put <span class="s2">"</span><span class="k">${</span><span class="nv">tgz</span><span class="k">}</span><span class="s2">"</span> <span class="s2">"s3://backup.yegor256.com/</span><span class="k">${</span><span class="nv">tgz</span><span class="k">}</span><span class="s2">"</span>
</code></pre></div></div><p>The output of the script is available through the web interface and this is yet another benefit of this solution. It‚Äôs easy to monitor what went wrong and restart the script. All logs are available through the browser. No SSH, no terminals.<p>I would say that it‚Äôs a light version of <a href="https://aws.amazon.com/datapipeline/">AWS Data Pipeline</a>. <a href="https://www.threecopies.com">ThreeCopies</a> does exactly the same, but it‚Äôs easier to configure, and it‚Äôs cheaper. I‚Äôm charging $0.01 per script execution hour. And I actually charge per second, while AWS always charges for a full hour. For $5.00 you get 500 hours. For example, the script you see above takes about 5 minutes to complete (the database is not huge). If you skip the hourly executions, like I did above, you will consume 170 minutes of server time every month, which will cost you about <strong>$0.34 per year</strong>! This is much cheaper than a server and its monitoring, I believe.<p>One more thing before you go. ThreeCopies is written in Java¬†8 and is open source, find it <a href="https://github.com/yegor256/threecopies">in GitHub</a>. Feel free to inspect the code, find bugs, and contribute with fixes or improvements.</div></article></div><div class="disqus"role="complementary"aria-hidden="true"><p class="disqus_hint">Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.<div id="disqus_thread"class="disqus-thread"><a>&nbsp;</a></div><script>let disqus_config=function(){this.page.url=document.location.href.split("?")[0].split("#")[0],this.page.identifier=this.page.url};(()=>{var t=document,e=t.createElement("script");e.src="https://yegor256.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript><div><p class="red">JavaScript is disabled in your browser, that's why you can't see comments under this post.</div></noscript></div><script id="dsq-count-scr"src="https://yegor256.disqus.com/count.js"async="async"></script><div class="wrapper"><footer class="footer"><p>&copy; <span itemscope=""itemprop="copyrightHolder"itemtype="http://schema.org/Person"><span itemprop="name">Yegor Bugayenko</span> </span>, 2014&ndash;<span itemprop="copyrightYear">2025</span></footer></div></section><div class="wrapper unprintable"style="text-align:center;margin-top:2em"><a href="https://www.sixnines.io/h/3ba1652f"><img src="https://www.sixnines.io/b/3ba1652f?style=flat"alt="sixnines availability badge"></a>&nbsp; <a href="https://github.com/yegor256/blog/stargazers"><img src="https://img.shields.io/github/stars/yegor256/blog.svg?style=flat-square"alt="GitHub stars"></a></div><script src="https://code.jquery.com/jquery-3.7.1.min.js"integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="crossorigin="anonymous"></script><script src="/js/all.js?3725104"></script><script type="application/ld+json">{ "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/", "https://www.youtube.com/c/yegor256" ] }</script>
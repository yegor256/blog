<!DOCTYPE html>
<html amp lang="en">
  <head>

    <meta charset="utf-8">
    <title>Each Private Static Method Is a Candidate for a New Class</title>
    <link rel="canonical" href="https://www.yegor256.com/2017/02/07/private-method-is-new-class.html">
    <link rel="icon" type="image/png" href="/favicon.ico">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage":{
          "@type": "WebPage",
          "@id": "https://www.yegor256.com/2017/02/07/private-method-is-new-class.html"
        },
        "headline": "Each Private Static Method Is a Candidate for a New Class",
        "image": {
          "@type": "ImageObject",
          "url": "/images/2017/02/the-master.jpg",
          "height": 675,
          "width": 1200
        },
        "datePublished": "2017-02-07",
        "dateModified": "2017-02-07",
        "author": {
          "@type": "Person",
          "name": "Yegor Bugayenko"
        },
        "publisher": {
          "@type": "Organization",
          "name": "yegor256.com",
          "logo": {
            "@type": "ImageObject",
            "url": "https://www.yegor256.com/images/face-512x512.jpg",
            "width": 512,
            "height": 512
          }
        },
        "description": "Private static methods are perfect instruments to avoid
code duplication inside a class, but they introduce
duplication between classes and are not testable.
",
        "keywords": ["private static method", "private method", "static method", "private static", "java private method"]
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style>
<noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500">
    <style amp-custom="amp-custom">
      @font-face {
        font-family: 'Cambria';
        src: url('https://www.yegor256.com/fonts/cambria/2EAA54_2_0.ttf');
      }
      body { font-family: 'Cambria', 'Times New Roman', serif; padding: .5em; font-size: 1.2em; }
      article { width: 600px; max-width: 100%; margin-left: auto; margin-right: auto; }
      pre, code { font-family: 'Source Code Pro', 'Courier New', monospace; font-size: .8em; }
      code { padding: 0 .3em; background-color: lightgray; }
      a, a:hover, a:visited { color: inherit; }
      .intro { color: red; font-size: .75em; }
      .photo { border-radius: 50%; }
      pre { overflow-x:scroll; }
    </style>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <article>
      <p class="intro">
        This is a mobile version, full one is
        <a href="https://www.yegor256.com/2017/02/07/private-method-is-new-class.html">here</a>.
      </p>
      <p>
        <amp-img src="/images/face-256x256.jpg" width="80" height="80" alt="Yegor Bugayenko" class="photo"></amp-img>
      </p>
      <p>Yegor Bugayenko<br>7 February 2017</p>
      <h1>Each Private Static Method Is a Candidate for a New Class</h1>
      <p>Do you have private static methods that help you break
your algorithms down into smaller parts? I do. Every time I write
a new method, I realize that it can be a new class instead. Of course,
I don’t make classes out of all of them, but that has to be the
goal. Private static methods are not reusable, while classes are—that
is the main difference between them, and it is crucial.</p>



<amp-img src="/images/2017/02/the-master.jpg" alt="The Master (2012) by Paul Thomas Anderson" height="675" width="1200" layout="responsive"></amp-img>

<p>Here is an example of a simple class:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Token</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">key</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">;</span>
  <span class="nc">String</span> <span class="nf">encoded</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">"key="</span>
      <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">)</span>
      <span class="o">+</span> <span class="s">"&amp;secret="</span>
      <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">secret</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>There is an obvious code duplication, right? The easiest way to resolve
it is to introduce a private static method:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Token</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">key</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">;</span>
  <span class="nc">String</span> <span class="nf">encoded</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">"key="</span>
      <span class="o">+</span> <span class="nc">Token</span><span class="o">.</span><span class="na">encoded</span><span class="o">(</span><span class="n">key</span><span class="o">)</span>
      <span class="o">+</span> <span class="s">"&amp;secret="</span>
      <span class="o">+</span> <span class="nc">Token</span><span class="o">.</span><span class="na">encoded</span><span class="o">(</span><span class="n">secret</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">encoded</span><span class="o">(</span><span class="nc">String</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">text</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Looks much better now. But what will happen if we have another class
that needs the exact same functionality? We will have to copy and paste
this private static method <code class="language-plaintext highlighter-rouge">encoded()</code> into it, right?</p>

<p>A better alternative would be to introduce a new class <code class="language-plaintext highlighter-rouge">Encoded</code> that
implements the functionality we want to share:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Encoded</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">raw</span><span class="o">;</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">raw</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>And then:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Token</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">key</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">;</span>
  <span class="nc">String</span> <span class="nf">encoded</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">"key="</span>
      <span class="o">+</span> <span class="k">new</span> <span class="nc">Encoded</span><span class="o">(</span><span class="n">key</span><span class="o">)</span>
      <span class="o">+</span> <span class="s">"&amp;secret="</span>
      <span class="o">+</span> <span class="k">new</span> <span class="nc">Encoded</span><span class="o">(</span><span class="n">secret</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Now this functionality is 1) reusable, and 2) testable. We can easily
use this class <code class="language-plaintext highlighter-rouge">Encoded</code> in many other places, and we can create a unit
test for it. We were not able to do that with the private static method before.</p>

<p>See the point? The rule of thumb I’ve already figured for myself is that
<em>each</em> private static method is a perfect candidate for a new class. That’s
why we don’t have them at all in <a href="https://www.eolang.org">EO</a>.</p>

<p>By the way, <em>public</em> static methods are a different story. They are also evil,
but for <a href="/2014/05/05/oop-alternative-to-utility-classes.html">different reasons</a>.</p>

<p>P.S. Now I think that the reasons in this article are applicable to <em>all</em> private
methods, not only static ones.</p>

<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">In OOP, private static methods are...</p>— Yegor Bugayenko (@yegor256) <a href="https://twitter.com/yegor256/status/1317719171480825856?ref_src=twsrc%5Etfw">October 18, 2020</a>
</blockquote>



    </article>
  </body>
</html>

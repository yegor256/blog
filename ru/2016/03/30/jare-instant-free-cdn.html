<!doctypehtml><html xmlns="http://www.w3.org/1999/xhtml"lang="en-US"xml:lang="en-US"itemscope=""itemtype="http://schema.org/WebSite"><meta charset="utf-8"><meta name="description"content="If you want your images, script, or CSS files be available via a CDN, use jare.io, an instant and free service."><meta name="keywords"content=""><meta name="viewport"content="width=device-width,minimum-scale=1,initial-scale=1"><meta name="google-site-verification"content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8"><meta name="author"content="Yegor Bugayenko"><meta name="og:site_name"content="Yegor Bugayenko"><meta name="og:type"content="article"><meta name="og:locale"content="en_US"><meta name="twitter:account_id"content="4503599630178231"><meta name="twitter:creator"content="@yegor256"><meta name="twitter:site"content="@yegor256"><meta name="twitter:title"property="og:title"content="Jare.io, an Instant and Free CDN"><meta name="twitter:description"property="og:description"content="If you want your images, script, or CSS files be available via a CDN, use jare.io, an instant and free service."><meta name="twitter:url"property="og:url"content="https://www.yegor256.com/ru/2016/03/30/jare-instant-free-cdn.html"><meta name="telegram:channel"content="AAAAAEJFMRzsRTRxM3ec6A"><link rel="search"type="application/opensearchdescription+xml"href="/opensearch.xml"title="yegor256"><link rel="shortcut icon"href="/favicon.ico?d864995d304"><link rel="apple-touch-icon"href="/favicon.ico?d864995d304"><link rel="alternate"type="application/rss+xml"title="RSS for yegor256.com"href="https://www.yegor256.com/rss.xml"><link rel="stylesheet"href="/css/layout.css?d864995d304"><link rel="stylesheet"href="/css/icons.css?d864995d304"><link rel="canonical"href="https://www.yegor256.com/ru/2016/03/30/jare-instant-free-cdn.html"><title>Jare.io, an Instant and Free CDN</title><div class="wrapper"><aside class="header-toggle unprintable"id="header-toggle"title="Show the menu"onclick='$("#header").show(),$("#header-toggle").hide()'>&#9776;</aside><header class="header"id="header"><div class="face"><a href="/about-me.html#form"class="sub"title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html"style="position:relative"><img src="/images/face-256x256.jpg"class="photo"alt="Yegor Bugayenko"></a></div><nav><ul class="menu social notranslate"><li><a href="https://twitter.com/intent/follow?screen_name=yegor256"rel="nofollow"title="Follow me on Twitter"><i class="icon icon-twitter notranslate"aria-hidden="true"></i></a><li><a href="/rss.xml"rel="nofollow"title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://github.com/yegor256"rel="nofollow"title="My GitHub profile"><i class="icon icon-github notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="http://stackoverflow.com/users/187141/yegor256"rel="nofollow"title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://www.facebook.com/yegor256"rel="nofollow"title="Follow me on Facebook"><i class="icon icon-facebook notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://instagram.com/yegor256"rel="nofollow"title="Follow me on Instagram"><i class="icon icon-instagram notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://www.linkedin.com/in/yegor256"rel="nofollow"title="My LinkedIn profile"><i class="icon icon-linkedin notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://www.youtube.com/c/yegor256?sub_confirmation=1"rel="nofollow"title="My Youtube video channel"><i class="icon icon-youtube notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://www.pinterest.com/yegor256/"rel="nofollow"title="My Pinterest boards"><i class="icon icon-pinterest notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://angel.co/yegor256"rel="nofollow"title="My AngelList profile"><i class="icon icon-angellist notranslate"aria-hidden="true"></i></a><li><a href="https://soundcloud.com/yegor256"rel="nofollow"title="My podcast"><i class="icon icon-podcast notranslate"aria-hidden="true"></i></a><li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721"rel="nofollow"title="My iTunes podcast"><i class="icon icon-itunes notranslate"aria-hidden="true"></i></a><li><a href="https://t.me/yegor256news"rel="nofollow"title="My Telegram public channel"><i class="icon icon-telegram notranslate"aria-hidden="true"></i></a><li><a href="mailto:blog@yegor256.com"rel="nofollow"title="Email me any time"><i class="icon icon-mail notranslate"aria-hidden="true"></i></a></ul><ul class="menu"><li><a href="/"title="Home page">Home</a><li><a href="/best.html"title="Best articles to read">12&#160;Best</a><li><a href="/contents.html"title="The contents of the entire blog">All&#160;391</a><li><a href="/teaching.html"title="My courses and lectures">Teaching</a><li><a href="/talks.html"title="Future and past conference talks">Talks</a><li><a href="/books.html"title="The books I wrote">Books</a><li><a href="/research.html"title="My research directions and progress">Research</a><li><a href="/pets.html"title="My loved pet projects">Pets</a><li><a href="/testimonials.html"title="What some people say about me">Testimonials</a><li><a href="/shift-m.html"title="Audio podcast about project management">Shift-M</a><li><a href="/paintings.html"title="My paintings for sale">Art</a><li><a href="https://ru.yegor256.com/"title="Немного на русском языке о политике в России, Украине и мире">Политика</a></ul></nav><div class="search"><form action="https://www.google.com/search"itemprop="potentialAction"itemscope=""itemtype="http://schema.org/SearchAction"><meta itemprop="target"content="https://www.google.com/search?q={q}"><input name="sitesearch"value="yegor256.com"type="hidden"> <input itemprop="query-input"id="search-query"class="field field-text"required="required"onfocus='$(".google").css("visibility","visible")'name="q"placeholder="Search..."autocomplete="off"> <input type="image"src="/images/google-search-icon.svg"class="google"title="Search via Google"alt="Search via Google"></form></div><div class="hot"><ul></ul></div></header></div><section itemscope=""itemtype="http://schema.org/BlogPosting"><div class="wrapper"><header><h1 itemprop="name headline mainEntityOfPage">Jare.io, an Instant and Free CDN</h1></header><article class="main"itemprop="articleBody"style="font-family:sans-serif;font-size:.9em;line-height:1.2em"><p style="color:#c42c00">The following text is a <em>partial</em> translation of the <a href="https://www.yegor256.com/2016/03/30/jare-instant-free-cdn.html">original English article</a>, performed by <a href="https://chat.openai.com/">ChatGPT</a> (gpt-3.5-turbo) and <a href="https://github.com/yegor256/jekyll-chatgpt-translate">this Jekyll plugin</a>:<p>CDN расшифровывается как сеть доставки контента. Технически, это набор серверов, расположенных в разных странах и на разных континентах. Вы даете им свой <code class="language-plaintext highlighter-rouge">logo.gif</code>, а они дают вам URL, который разрешается в разные серверы в зависимости от того, кто пытается его разрешить. В результате файл всегда близок к конечному пользователю, и ваш веб-сайт загружается намного быстрее, чем без CDN. Звучит хорошо, но все поставщики CDN хотят деньги за свои услуги и обычно требуют довольно сложной настройки и процедуры регистрации. Мой собственный проект <a href="http://www.jare.io">jare.io</a> - это бесплатный CDN, который прост в настройке. Он использует ресурсы AWS CloudFront.<p>Сначала я покажу, как это работает, а затем, если вам интересны подробности, я объясню, как это делается внутри. Предположим, у вас есть такой HTML:<p>Я хочу, чтобы этот <code class="language-plaintext highlighter-rouge">logo.svg</code> доставлялся через CDN. Есть два шага. Сначала я регистрирую свой домен на <a href="http://www.jare.io">jare.io</a>:<p>Второй шаг - я изменяю свой HTML:<p>That’s it.<p>Попробуйте это с использованием ваших собственных ресурсов, и вы увидите, насколько быстрее они будут загружаться.<p>Это абсолютно бесплатно, но я прошу вас быть разумными. Если у вас огромный трафик, вам нужен собственный аккаунт в CloudFront или где-то еще. Моя услуга предназначена для небольших проектов.<p>Теперь немного технических деталей, если вы хотите узнать, как технически работает это решение. Сначала обсудим, что такое CDN и как оно работает.<p>Когда ваш браузер хочет загрузить изображение, у него есть <a href="https://en.wikipedia.org/wiki/Uniform_Resource_Locator">URL</a>, как в примере выше. Вот этот URL: <code class="language-plaintext highlighter-rouge">http://www.teamed.io/image/logo.svg</code>. В этом адресе есть три важные части. Первая - <code class="language-plaintext highlighter-rouge">http</code>, <a href="https://en.wikipedia.org/wiki/Communications_protocol">протокол</a>. Вторая - <code class="language-plaintext highlighter-rouge">www.teamed.io</code>, имя <a href="https://en.wikipedia.org/wiki/Host_%28network%29">хоста</a>, и хвост <code class="language-plaintext highlighter-rouge">/images/logo.svg</code>, который является <a href="https://en.wikipedia.org/wiki/Uniform_Resource_Identifier#Syntax">путем</a>. Чтобы загрузить изображение, браузер должен открыть <a href="https://en.wikipedia.org/wiki/Network_socket">сокет</a>, соединяющий ваш компьютер и сервер, на котором находится изображение. Чтобы открыть сокет, браузеру нужно знать <a href="https://en.wikipedia.org/wiki/IP_address">IP-адрес</a> сервера.<p>В этом URL нет такого адреса. Чтобы найти IP-адрес, браузер выполняет так называемый поиск. Он подключается к ближайшему <a href="https://en.wikipedia.org/wiki/Name_server">именному серверу</a> и спрашивает: “какой IP-адрес у www.teamed.io?” Ответ обычно содержит один IP-адрес:<p>IP-адрес <code class="language-plaintext highlighter-rouge">www.teamed.io</code> на момент написания составляет <code class="language-plaintext highlighter-rouge">199.27.79.133</code>.<p>Когда адрес известен, браузер открывает новый сокет и отправляет через него <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_message">HTTP-запрос</a>.<p>Сервер отвечает с <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Response_message">HTTP ответом</a>:<p>Это <a href="https://en.wikipedia.org/wiki/Scalable_Vector_Graphics">изображение SVG</a>, которое мы ищем. Браузер отображает его на веб-странице и всё.<p>Пока все хорошо, но если расстояние между вашим браузером и этим IP-адресом достаточно велико, загрузка изображения займет много времени. Что-то вроде сотен миллисекунд. Попробуйте загрузить это изображение, которое находится на сервере, размещенном в Праге, Чешская Республика (я использую <code class="language-plaintext highlighter-rouge">curl</code>, как рекомендовано <a href="https://josephscott.org/archives/2011/10/timing-details-with-curl/">здесь</a>).<p>Я пытаюсь сделать это из Пало-Альто, Калифорния, что находится примерно на половине земного шара от Праги. Как видите, это занимает более 500 мс. Это слишком много, особенно если на веб-странице содержится много изображений. В целом, загрузка страницы может занимать несколько секунд, только потому что сервер находится слишком далеко от меня. Что ж, он всегда будет слишком далеко от некоторых пользователей, независимо от того, где мы его разместим. Если мы его разместим здесь, в Калифорнии, он будет достаточно близко ко мне, и изображение будет загружаться мгновенно (менее 50 мс). Но для пользователей в Праге это будет слишком медленно.<p>У этой проблемы нет решения, если сервер генерирует изображения или страницы на лету в каком-то уникальном формате, и если мы не можем установить несколько серверов в разных странах и на разных континентах. Но в большинстве случаев, как в нашем примере с логотипом, это не проблема. Этот логотип не должен быть уникальным для каждого пользователя. Он является очень <em>статичным</em> ресурсом, который должен быть создан только один раз и доставлен всем без изменений.<p>Итак, что если мы установим сервер где-нибудь здесь, в Калифорнии, и позволим пользователем из Калифорнии подключаться к нему? Когда запрос на <code class="language-plaintext highlighter-rouge">logo.gif</code> поступает на один из <em>крайних</em> серверов, он будет подключаться к центральному серверу в Праге и загружать файл. Это произойдет только один раз. После этого, крайний сервер не будет запрашивать файл у центрального сервера. Он будет сразу возвращать его из своего внутреннего кэша.<p>Нам нужно иметь много крайних серверов, желательно во всех странах, где могут находиться наши пользователи. Первый запрос займет больше времени, но все последующие будут гораздо быстрее, так как они будут обрабатываться ближайшим крайним сервером.<p>Теперь вопрос в том, как браузер будет знать, какой крайний сервер является наиболее близким, верно? Мы просто обманываем процесс разрешения доменного имени. В зависимости от того, кто спрашивает, DNS будет давать разные ответы. Давайте возьмем, например, <code class="language-plaintext highlighter-rouge">cf.jare.io</code> (это имя всех крайних серверов, ответственных за доставку нашего контента в AWS CloudFront, CNAME для <code class="language-plaintext highlighter-rouge">djk1be5eatcae.cloudfront.net</code>). Если я запрашиваю его из Калифорнии, я получаю следующий ответ:<p>Находится крайний сервер с IP-адресом <code class="language-plaintext highlighter-rouge">54.230.141.211</code> в <a href="https://db-ip.com/54.230.141.211">Сан-Франциско</a>. Это довольно близко ко мне, менее чем в пятидесяти милях. Если я выполняю ту же операцию с сервера в Вирджинии, я получаю другой ответ:<p>Крайний сервер с IP-адресом <code class="language-plaintext highlighter-rouge">52.85.131.217</code> расположен в <a href="https://db-ip.com/52.85.131.217">Вашингтоне</a>, что находится далеко от меня, но очень близко к серверу, с которого я выполнял поиск.<p>По всему миру существует тысячи серверов имен, и у каждого из них есть разная информация о том, где физически находится этот крайний сервер <code class="language-plaintext highlighter-rouge">cf.jare.io</code>. В зависимости от того, кто спрашивает, ответ будет разным.<p><a href="https://aws.amazon.com/cloudfront/">CloudFront</a> - одно из самых простых решений CDN. Все, что вам нужно сделать, чтобы начать доставку контента через их узлы, это создать “распределение” и настроить его. Распределение является связующим звеном между исходным контентом и краевыми серверами:<p>skinparam componentStyle uml2 Browser -right-&gt; [Edge] [Edge] -right-&gt; [Central] [Central] -right-&gt; [Origin]<p>Один из краевых серверов получает HTTP-запрос. Если у него уже есть <code class="language-plaintext highlighter-rouge">logo.svg</code> в своем кэше, он сразу возвращает HTTP-ответ с его содержимым. Если его кэш пуст, краевой сервер отправляет HTTP-запрос на центральный сервер. Этот сервер знает о “распределении” и его настройках. Он устанавливает HTTP-соединение с исходным сервером, который является <code class="language-plaintext highlighter-rouge">www.teamed.io</code>, и запрашивает возврат <code class="language-plaintext highlighter-rouge">logo.svg</code>. После выполнения изображение возвращается на краевой сервер, где оно кэшируется.<p>Это выглядит довольно просто, но это не бесплатно и настройка занимает некоторое время. Вам нужно создать учетную запись в CloudFront, зарегистрировать там свою кредитную карту и получить одобрение. Затем вам нужно создать распределение и настроить его. Вы также должны создать CNAME на своем сервере имен. Если вы делаете это для одного веб-сайта, это не проблема. Если у вас есть дюжина веб-сайтов, это займет много времени.<p>Jare.io - это дополнительный компонент в этой диаграмме, который облегчает вашу жизнь:<p>skinparam componentStyle uml2 Браузер -right-&gt; [Соединение] [Соединение] -right-&gt; [Центральный] [Центральный] -down-&gt; [Реле] [Реле] -right-&gt; [Источник]<p>У Jare.io есть “реле”, которое действует как исходный сервер для CloudFront. Все запросы, которые поступают на <code class="language-plaintext highlighter-rouge">cf.jare.io</code>, отправляются на реле. Реле решает, что с ними делать. Решение основано на информации из URI HTTP-запроса. Например, у запроса из браузера есть такой путь URI:<p>Помните, что запрос делается на <code class="language-plaintext highlighter-rouge">cf.jare.io</code>, который является адресом крайнего сервера. Точно такой же URI достигает <code class="language-plaintext highlighter-rouge">relay.jare.io</code>. URI содержит достаточно информации для принятия решения о том, какой файл должен быть возвращен. Реле делает новый HTTP-запрос на <code class="language-plaintext highlighter-rouge">www.teamed.io</code> и получает изображение.<p>Преимущество этого решения заключается в его простоте. Для небольших веб-сайтов это бесплатный и быстрый CDN.<p>Кстати, когда мы запрашиваем то же изображение через jare.io (и CloudFront), оно возвращается намного быстрее.<p>Большая часть работы выполняется AWS CloudFront, в то время как jare.io является всего лишь ретранслятором, который облегчает его настройку. Кроме того, это бесплатно, потому что jare.io спонсируется <a href="https://www.zerocracy.com">Zerocracy</a>. Другими словами, моя компания будет оплачивать использование CloudFront. Я был бы благодарен, если вы учтете это и не использовали jare.io для ресурсов, требующих большого объема трафика.<p class="jekyll-chatgpt-translate">Translated by ChatGPT gpt-3.5-turbo/42 on 2023-11-22 at 10:33</article></div><div class="wrapper"><footer class="footer"><p>&copy; <span itemscope=""itemprop="copyrightHolder"itemtype="http://schema.org/Person"><span itemprop="name">Yegor Bugayenko</span> </span>2014&ndash;<span itemprop="copyrightYear">2023</span></footer></div></section><div class="wrapper unprintable"style="text-align:center;margin-top:2em"><a href="https://www.sixnines.io/h/3ba1652f"><img src="//www.sixnines.io/b/3ba1652f?style=flat"alt="sixnines availability badge"></a>&nbsp; <a href="https://github.com/yegor256/blog/stargazers"><img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square"alt="GitHub stars"></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script><script src="/js/all.js?d864995d304"></script><script>var disqus_shortname="yegor256"</script><script id="dsq-count-scr"src="//yegor256.disqus.com/count.js"async="async"></script><script>((e,a,t,g,n,c)=>{e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,n=a.createElement(t),c=a.getElementsByTagName(t)[0],n.async=1,n.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(n,c)})(window,document,"script","ga"),ga("create","UA-1963507-32","auto"),ga("send","pageview")</script><script>Cd=document,Cr="&"+Math.random(),Cp="&s=1",Cd.cookie="b=b",Cd.cookie&&(Cp+="&c=1"),Cp+="&t="+(new Date).getTimezoneOffset(),self!=top&&(Cp+="&f=1")</script><script>navigator.javaEnabled()&&(Cp+="&j=1")</script><script>"undefined"!=typeof screen&&(Cp+="&w="+screen.width+"&h="+screen.height+"&d="+(screen.colorDepth||screen.pixelDepth))</script><script>Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+"&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+"' border='0' width='1' height='1'/>")</script><script type="application/ld+json">{ "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] }</script>
<!doctypehtml><html xmlns="https://www.w3.org/1999/xhtml"lang="en-US"xml:lang="en-US"itemscope=""itemtype="http://schema.org/WebSite"><meta charset="utf-8"><meta name="description"content="Xembly is an imperative language for XML data and schema manipulations that makes XML building much easier and convenient"><meta name="keywords"content=""><meta name="viewport"content="width=device-width,minimum-scale=1,initial-scale=1"><meta name="google-site-verification"content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8"><meta name="author"content="Yegor Bugayenko"><meta name="og:site_name"content="Yegor Bugayenko"><meta name="og:type"content="article"><meta name="og:locale"content="en_US"><meta name="twitter:account_id"content="4503599630178231"><meta name="twitter:creator"content="@yegor256"><meta name="twitter:site"content="@yegor256"><meta name="twitter:title"property="og:title"content="Xembly, an Assembly for XML"><meta name="twitter:description"property="og:description"content="Xembly is an imperative language for XML data and schema manipulations that makes XML building much easier and convenient"><meta name="twitter:url"property="og:url"content="https://www.yegor256.com/ru/2014/04/09/xembly-intro.html"><meta name="telegram:channel"content="AAAAAEJFMRzsRTRxM3ec6A"><link rel="search"type="application/opensearchdescription+xml"href="/opensearch.xml"title="yegor256"><link rel="shortcut icon"href="/favicon.ico?a92399eaa71"><link rel="apple-touch-icon"href="/favicon.ico?a92399eaa71"><link rel="alternate"type="application/rss+xml"title="RSS for yegor256.com"href="https://www.yegor256.com/rss.xml"><link rel="stylesheet"href="/css/layout.css?a92399eaa71"><link rel="stylesheet"href="/css/icons.css?a92399eaa71"><link rel="canonical"href="https://www.yegor256.com/ru/2014/04/09/xembly-intro.html"><title>Xembly, an Assembly for XML</title><div class="wrapper"><aside class="header-toggle unprintable"id="header-toggle"title="Show the menu"onclick='$("#header").show(),$("#header-toggle").hide()'>&#9776;</aside><header class="header"id="header"><div class="face"><a href="/about-me.html#form"class="sub"title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html"style="position:relative"><img src="/images/face-256x256.jpg"class="photo"alt="Yegor Bugayenko"></a></div><nav><ul class="menu social notranslate"><li><a href="https://twitter.com/intent/follow?screen_name=yegor256"rel="nofollow"title="Follow me on Twitter"><i class="icon icon-twitter notranslate"aria-hidden="true"></i></a><li><a href="/rss.xml"rel="nofollow"title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://github.com/yegor256"rel="nofollow"title="My GitHub profile"><i class="icon icon-github notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="http://stackoverflow.com/users/187141/yegor256"rel="nofollow"title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://www.facebook.com/yegor256"rel="nofollow"title="Follow me on Facebook"><i class="icon icon-facebook notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://instagram.com/yegor256"rel="nofollow"title="Follow me on Instagram"><i class="icon icon-instagram notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://www.linkedin.com/in/yegor256"rel="nofollow"title="My LinkedIn profile"><i class="icon icon-linkedin notranslate"aria-hidden="true"></i></a><li><a itemprop="sameAs"href="https://www.youtube.com/c/yegor256?sub_confirmation=1"rel="nofollow"title="My Youtube video channel"><i class="icon icon-youtube notranslate"aria-hidden="true"></i></a><li><a href="https://soundcloud.com/yegor256"rel="nofollow"title="My podcast"><i class="icon icon-podcast notranslate"aria-hidden="true"></i></a><li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721"rel="nofollow"title="My iTunes podcast"><i class="icon icon-itunes notranslate"aria-hidden="true"></i></a><li><a href="https://t.me/yegor256news"rel="nofollow"title="My Telegram public channel"><i class="icon icon-telegram notranslate"aria-hidden="true"></i></a><li><a href="mailto:blog@yegor256.com"rel="nofollow"title="Email me any time"><i class="icon icon-mail notranslate"aria-hidden="true"></i></a></ul><ul class="menu"><li><a href="/"title="Home page">Home</a><li><a href="/best.html"title="Best articles to read">12&#160;Best</a><li><a href="/contents.html"title="The contents of the entire blog">All&#160;393</a><li><a href="/teaching.html"title="My courses and lectures">Teaching</a><li><a href="/talks.html"title="Future and past conference talks">Talks</a><li><a href="/books.html"title="The books I wrote">Books</a><li><a href="/research.html"title="My research directions and progress">Research</a><li><a href="/pets.html"title="My loved pet projects">Pets</a><li><a href="/testimonials.html"title="What some people say about me">Testimonials</a><li><a href="/shift-m.html"title="Audio podcast about project management">Shift-M</a><li><a href="/paintings.html"title="My paintings for sale">Art</a><li><a href="https://ru.yegor256.com/"title="Немного на русском языке о политике в России, Украине и мире">Политика</a></ul></nav><div class="search"><form action="https://www.google.com/search"itemprop="potentialAction"itemscope=""itemtype="http://schema.org/SearchAction"><meta itemprop="target"content="https://www.google.com/search?q={q}"><input name="sitesearch"value="yegor256.com"type="hidden"> <input itemprop="query-input"id="search-query"class="field field-text"required="required"onfocus='$(".google").css("visibility","visible")'name="q"placeholder="Search..."autocomplete="off"> <input type="image"src="/images/google-search-icon.svg"class="google"title="Search via Google"alt="Search via Google"></form></div><div class="hot"><ul></ul></div></header></div><section itemscope=""itemtype="http://schema.org/BlogPosting"><div class="wrapper"><header><h1 itemprop="name headline mainEntityOfPage">Xembly, an Assembly for XML</h1></header><article class="main"itemprop="articleBody"style="font-family:sans-serif;font-size:.9em;line-height:1.2em"><p style="color:#c42c00">The following text is a <em>partial</em> translation of the <a href="https://www.yegor256.com/2014/04/09/xembly-intro.html">original English article</a>, performed by <a href="https://chat.openai.com/">ChatGPT</a> (gpt-3.5-turbo) and <a href="https://github.com/yegor256/jekyll-chatgpt-translate">this Jekyll plugin</a>:<p>Я использую XML в почти всех своих проектах. И, несмотря на всю суету вокруг JSON/YAML, я искренне считаю, что XML - один из самых великих языков, когда-либо созданных. Кроме того, я считаю, что красота XML проявляется, когда он используется в сочетании с смежными технологиями.<p>Например, вы можете предоставить свои данные в формате XML и отображать их для конечного пользователя с помощью <a href="https://www.w3.org/Style/XSL/">стилевых таблиц XSL</a>.<p>Еще один пример - когда вы проверяете одни и те же данные перед отображением, чтобы убедиться, что структура правильная. Вы можете сделать это с помощью <a href="https://www.w3.org/TR/xmlschema11-1/">схемы XSD</a>. В качестве альтернативы, вы можете выбрать конкретные элементы данных из всего документа, используя запросы <a href="https://www.w3.org/TR/xpath/">XPath</a>.<p>По сути, эти три технологии - XSL, схема XSD и XPath - делают XML настолько мощным.<p>Однако, бывают моменты, когда XML не справляется. Например, представьте, что у вас есть существующий документ, который нужно немного изменить. Допустим, вот такой:<p>Вышеприведенный код представляет собой список аккаунтов. Каждый аккаунт имеет свой собственный <code class="language-plaintext highlighter-rouge">id</code> и несколько дочерних элементов. В нашем примере нам нужно найти аккаунт, принадлежащий <code class="language-plaintext highlighter-rouge">Jeffrey</code>, и увеличить его баланс на <code class="language-plaintext highlighter-rouge">500</code>. Как мы можем это сделать?<p>Ну, есть несколько возможных решений:<ul><li><p>DOM-разбери его, найди элемент с помощью XPath, измените значение и затем напечатайте его;<li><p>применить параметризованную таблицу стилей XSL;<li><p>применить небольшой скрипт XQuery для внесения изменений</ul><p>Все эти методы имеют свои недостатки. Однако у них всех есть одна общая проблема - они очень громоздкие. Для выполнения этой довольно простой операции вам потребуется по крайней мере одна страница кода для каждого из вышеупомянутых методов. Более того, если логика операции становится более сложной, количество необходимого кода растет намного быстрее, чем вы могли бы ожидать.<p>Проще говоря, в XML отсутствует инструмент для примитивной обработки данных внутри документа. Возможно, именно этот недостаток делает XML непопулярным у некоторых людей.<p>В любом случае, вот инструмент, который я создал несколько месяцев назад: <a href="https://www.xembly.org">Xembly</a>. Это императивный язык с несколькими простыми директивами и по стилю напоминает <a href="https://en.wikipedia.org/wiki/Assembly_language">Assembly</a>. Вот почему он называется Xembly. В Xembly нет циклов, условий или переменных - только последовательность директив с аргументами.<p>Давайте создадим простой пример. Скажем, например, мы хотим добавить новый номер счета <code class="language-plaintext highlighter-rouge">36</code> в наш список документов. Код будет выглядеть так:<p>Вышеуказанное должно быть интуитивно понятно, но на всякий случай я объясню. Во-первых, директива <code class="language-plaintext highlighter-rouge">XPATH</code> указывает на элемент, найденный запросом XPath “/accounts”. Это будет наш корневой элемент. Мы предполагаем, что он существует в документе. Поэтому, если его нет, наш сценарий Xembly завершится с исключением времени выполнения.<p>Затем, директива <code class="language-plaintext highlighter-rouge">ADD</code> в строке 2 создает новый XML-элемент без дочерних элементов или атрибутов. Затем, директива <code class="language-plaintext highlighter-rouge">ATTR</code> устанавливает атрибут для этого элемента. Затем код добавляет новый дочерний элемент <code class="language-plaintext highlighter-rouge">name</code> и устанавливает его текстовое значение на “Donny” с использованием директивы <code class="language-plaintext highlighter-rouge">SET</code>. Наконец, мы перемещаем наш указатель обратно к элементу <code class="language-plaintext highlighter-rouge">account</code> с помощью <code class="language-plaintext highlighter-rouge">UP</code>, добавляем дочерний элемент <code class="language-plaintext highlighter-rouge">balance</code> и устанавливаем его значение на “3400”.<p>Наша задача изменения баланса может быть выражена в Xembly с помощью следующего кода:<p>Директива <code class="language-plaintext highlighter-rouge">XSET</code> задает значение текста элемента, аналогично директиве <code class="language-plaintext highlighter-rouge">SET</code>, но предварительно вычисляет его с использованием предоставленного XPath-выражения <code class="language-plaintext highlighter-rouge">. + 500</code>.<p>Xembly выполняет все манипуляции через DOM. Следовательно, Xembly может быть реализован внутри любого языка, имеющего встроенную реализацию DOM.<p>В настоящее время существует только одна реализация языка Xembly - на Java. Вот как это работает:<p>В этом отрывке я использую дополнительный конструктор сценариев <code class="language-plaintext highlighter-rouge">Directives</code>, который позволяет генерировать директивы в удобном стиле. Затем я использую класс <code class="language-plaintext highlighter-rouge">Xembler</code>, который аналогичен “ассемблеру”, чтобы применить все указанные директивы к объекту <code class="language-plaintext highlighter-rouge">document</code> класса <code class="language-plaintext highlighter-rouge">org.w3c.dom.Document</code>.<p>Кроме того, Xembly может использоваться для создания XML-документов с нуля и в качестве замены для традиционного построения DOM. Быстрый пример:<p>Вышеуказанный фрагмент создает следующий результат:<p>Для меня это кажется более простым и компактным.<p>Как обычно, ваши сообщения о найденных ошибках и предложения всегда приветствуются. Пожалуйста, отправьте их в <a href="https://github.com/yegor256/xembly/issues">GitHub issues</a>.<p class="jekyll-chatgpt-translate">Translated by ChatGPT gpt-3.5-turbo/42 on 2023-12-15 at 06:22</article></div><div class="wrapper"><footer class="footer"><p>&copy; <span itemscope=""itemprop="copyrightHolder"itemtype="http://schema.org/Person"><span itemprop="name">Yegor Bugayenko</span> </span>2014&ndash;<span itemprop="copyrightYear">2023</span></footer></div></section><div class="wrapper unprintable"style="text-align:center;margin-top:2em"><a href="https://www.sixnines.io/h/3ba1652f"><img src="//www.sixnines.io/b/3ba1652f?style=flat"alt="sixnines availability badge"></a>&nbsp; <a href="https://github.com/yegor256/blog/stargazers"><img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square"alt="GitHub stars"></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script><script src="/js/all.js?a92399eaa71"></script><script>var disqus_shortname="yegor256"</script><script id="dsq-count-scr"src="//yegor256.disqus.com/count.js"async="async"></script><script>((e,a,t,g,n,c)=>{e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,n=a.createElement(t),c=a.getElementsByTagName(t)[0],n.async=1,n.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(n,c)})(window,document,"script","ga"),ga("create","UA-1963507-32","auto"),ga("send","pageview")</script><script>Cd=document,Cr="&"+Math.random(),Cp="&s=1",Cd.cookie="b=b",Cd.cookie&&(Cp+="&c=1"),Cp+="&t="+(new Date).getTimezoneOffset(),self!=top&&(Cp+="&f=1")</script><script>navigator.javaEnabled()&&(Cp+="&j=1")</script><script>"undefined"!=typeof screen&&(Cp+="&w="+screen.width+"&h="+screen.height+"&d="+(screen.colorDepth||screen.pixelDepth))</script><script>Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+"&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+"' border='0' width='1' height='1'/>")</script><script type="application/ld+json">{ "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] }</script>
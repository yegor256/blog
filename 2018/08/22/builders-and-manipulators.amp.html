<!DOCTYPE html>
<html amp lang="en">
  <head>

    <meta charset="utf-8">
    <title>Builders and Manipulators</title>
    <link rel="canonical" href="https://www.yegor256.com/2018/08/22/builders-and-manipulators.html">
    <link rel="icon" type="image/png" href="/favicon.ico">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage":{
          "@type": "WebPage",
          "@id": "https://www.yegor256.com/2018/08/22/builders-and-manipulators.html"
        },
        "headline": "Builders and Manipulators",
        "image": {
          "@type": "ImageObject",
          "url": "/images/2018/08/the-night-of.jpg",
          "height": 898,
          "width": 1600
        },
        "datePublished": "2018-08-22",
        "dateModified": "2018-08-22",
        "author": {
          "@type": "Person",
          "name": "Yegor Bugayenko"
        },
        "publisher": {
          "@type": "Organization",
          "name": "yegor256.com",
          "logo": {
            "@type": "ImageObject",
            "url": "https://www.yegor256.com/images/face-512x512.jpg",
            "width": 512,
            "height": 512
          }
        },
        "description": "Giving good names to methods in object-oriented programming
is a tough job, which can be done right if you follow this
simple principle.
",
        "keywords": ["good name for a method", "java method name", "method name in oop", "method naming best practices", "method naming"]
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style>
<noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500">
    <style amp-custom="amp-custom">
      @font-face {
        font-family: 'Cambria';
        src: url('https://www.yegor256.com/fonts/cambria/2EAA54_2_0.ttf');
      }
      body { font-family: 'Cambria', 'Times New Roman', serif; padding: .5em; font-size: 1.2em; }
      article { width: 600px; max-width: 100%; margin-left: auto; margin-right: auto; }
      pre, code { font-family: 'Source Code Pro', 'Courier New', monospace; font-size: .8em; }
      code { padding: 0 .3em; background-color: lightgray; }
      a, a:hover, a:visited { color: inherit; }
      .intro { color: red; font-size: .75em; }
      .photo { border-radius: 50%; }
      pre { overflow-x:scroll; }
    </style>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <article>
      <p class="intro">
        This is a mobile version, full one is
        <a href="https://www.yegor256.com/2018/08/22/builders-and-manipulators.html">here</a>.
      </p>
      <p>
        <amp-img src="/images/face-256x256.jpg" width="80" height="80" alt="Yegor Bugayenko" class="photo"></amp-img>
      </p>
      <p>Yegor Bugayenko<br>22 August 2018</p>
      <h1>Builders and Manipulators</h1>
      <p>Here is a simple principle for naming methods in OOP,
which I’m trying to follow in my code:
it’s a <em>verb</em> if it <em>manipulates</em>, it’s a <em>noun</em> if it <em>builds</em>.
That’s it. Nothing in between. Methods like
<code class="language-plaintext highlighter-rouge">saveFile()</code> or <code class="language-plaintext highlighter-rouge">getTitle()</code> don’t fit and must be renamed and refactored.
Moreover, methods that “manipulate” must always return <code class="language-plaintext highlighter-rouge">void</code>,
for example <code class="language-plaintext highlighter-rouge">print()</code> or <code class="language-plaintext highlighter-rouge">save()</code>. Let me explain.</p>



<amp-img src="/images/2018/08/the-night-of.jpg" alt="The Night Of (2016) by Richard Price et al." height="898" width="1600" layout="responsive"></amp-img>

<p>First, I have to say that this idea is very similar to the one
suggested by <a href="https://en.wikipedia.org/wiki/Bertrand_Meyer">Bertrand Meyer</a> in his book
<a href="https://amzn.to/2MWEuJP">Object Oriented Software Construction</a>,
where he proposes we divide an object’s methods into two sharply
separated categories: queries and commands.</p>

<p>The idea behind this principle is rather philosophical. Let’s start
with builders, which are supposed to create or find an object and then return
it. Suppose I have a store of books and I ask it to give me a book
by name:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">Bookshelf</span> <span class="o">{</span>
  <span class="nc">Book</span> <span class="nf">find</span><span class="o">(</span><span class="nc">String</span> <span class="n">title</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>It’s obviously a “builder” (or a “query” in Meyer’s terms). I ask for
a book and it’s given to me. The problem, though, is with the name of the method.
It’s called “find,” which implies that I know how the book will be dealt with. It will
be found.</p>

<p>However, this is not how we should treat our objects. We must not tell them
how to do the job we want them to do. Instead, we must let <em>them</em> decide
whether the book will be found, constructed, or maybe taken from a memory cache.
When we query, we have to say what result we are looking for and let
the object make the decision about the way this result is going to be built.
A much more appropriate name for this method would be <code class="language-plaintext highlighter-rouge">book()</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">Bookshelf</span> <span class="o">{</span>
  <span class="nc">Book</span> <span class="nf">book</span><span class="o">(</span><span class="nc">String</span> <span class="n">title</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The rule of thumb is: a builder is always a noun. If the method returns
something, it has to be a noun. Preferably its name should explain what
the method returns. If it’s a book, name it <code class="language-plaintext highlighter-rouge">book()</code>. If it’s a file, call
the method <code class="language-plaintext highlighter-rouge">file()</code>, etc. Here are a few good builder examples:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kt">float</span> <span class="nf">speed</span><span class="o">(</span><span class="nc">Actor</span> <span class="n">actor</span><span class="o">);</span>
  <span class="nc">Money</span> <span class="nf">salary</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">);</span>
  <span class="nc">File</span> <span class="nf">database</span><span class="o">();</span>
  <span class="nc">Date</span> <span class="nf">deadline</span><span class="o">(</span><span class="nc">Project</span> <span class="n">project</span><span class="o">,</span> <span class="nc">User</span> <span class="n">user</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Here, on the contrary, are a few examples of badly named builders:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kt">float</span> <span class="nf">calculateSpeed</span><span class="o">(</span><span class="nc">Actor</span> <span class="n">actor</span><span class="o">);</span>
  <span class="nc">Money</span> <span class="nf">getSalary</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">);</span>
  <span class="nc">File</span> <span class="nf">openDatabase</span><span class="o">();</span>
  <span class="nc">Date</span> <span class="nf">readDeadline</span><span class="o">(</span><span class="nc">Project</span> <span class="n">project</span><span class="o">,</span> <span class="nc">User</span> <span class="n">user</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>There is no place for a verb in a builder’s name!</p>

<p>It’s not only about the name, by the way. A builder, since its name doesn’t
contain a verb, should not do any modifications to the encapsulated entities.
It may only create or find something and return it. Just like a
<a href="https://en.wikipedia.org/wiki/Pure_function">pure function</a>, it must not have any
side-effects.</p>

<p>Next, there are “manipulators” (or “commands” in Meyer’s terms). They do some
work for us, modifying the entities, which the object encapsulates. They are
the opposite to builders, because they actually make changes to the world
abstracted by the object.
For example, we ask the <code class="language-plaintext highlighter-rouge">Bookshelf</code> to add a new book to itself:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">Bookshelf</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="nc">Book</span> <span class="n">book</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The method adds the book to the storage. How exactly the storage will be
modified, we don’t know. But we know that since the name of the method
is a verb, there will be modifications.</p>

<p>Also, manipulators must not return anything. It’s always <code class="language-plaintext highlighter-rouge">void</code> that we see
as the type of their response. This is needed mostly in order to separate the imperative
part of the code from the declarative part. We either receive objects
or tell them what to do. We must not mix those activities in one method.</p>

<p>The purpose of these rules is to make the code simpler. If you follow
them, and all your builders only return objects and your manipulators
only modify the world, the entire design will become easier to
understand. Methods will be smaller and their names shorter.</p>



<p>Of course, very often you will have a hard time finding those names. From time to time
you will want to return something from a manipulator or make your builder
make some changes, say to the cache. Try to resist this temptation and stay
with the principle: a method is either a builder or a manipulator, nothing in
the middle. The examples above are rather primitive, the code in real life
is much more complicated. But that’s what the principle is going to help
us with—making the code simpler.</p>

<p>I’m also aware of the <a href="http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html">noun/verb</a>
principle, which suggests always naming classes as nouns and their methods
as verbs. I believe it’s a wrong idea, since it doesn’t differentiate
builders from manipulators and encourages us to always think in terms
of imperative instructions. I believe that OOP must be much more about declarative
composition of objects, even if we have to sometimes get them from other objects
instead of instantiating them via constructors. That’s why we do need builders
in most situations and we also have to see an obvious difference between them and the other
methods, manipulators.</p>

<p>You can find a more detailed discussion of this problem
in <a href="http://goo.gl/W2WVMk">Elegant Objects</a>, Volume 1, Section 2.4.</p>

<blockquote class="twitter-tweet" data-lang="en">
<p lang="en" dir="ltr">How would you name a method of a class Document that reads and returns its content? <a href="https://twitter.com/hashtag/elegantobjects?src=hash&amp;ref_src=twsrc%5Etfw">#elegantobjects</a></p>— Yegor Bugayenko (@yegor256) <a href="https://twitter.com/yegor256/status/1033605343274840064?ref_src=twsrc%5Etfw">August 26, 2018</a>
</blockquote>



    </article>
  </body>
</html>

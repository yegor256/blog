<!DOCTYPE html>
<html amp lang="en">
  <head>

    <meta charset="utf-8">
    <title>Object Cohesion: Why It Matters</title>
    <link rel="canonical" href="https://www.yegor256.com/2020/02/11/object-cohesion.html">
    <link rel="icon" type="image/png" href="/favicon.ico">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage":{
          "@type": "WebPage",
          "@id": "https://www.yegor256.com/2020/02/11/object-cohesion.html"
        },
        "headline": "Object Cohesion: Why It Matters",
        "image": {
          "@type": "ImageObject",
          "url": "/images/2020/02/kin-dza-dza.jpg",
          "height": 720,
          "width": 1280
        },
        "datePublished": "2020-02-11",
        "dateModified": "2020-02-11",
        "author": {
          "@type": "Person",
          "name": "Yegor Bugayenko"
        },
        "publisher": {
          "@type": "Organization",
          "name": "yegor256.com",
          "logo": {
            "@type": "ImageObject",
            "url": "https://www.yegor256.com/images/face-512x512.jpg",
            "width": 512,
            "height": 512
          }
        },
        "description": "Object cohesion is a quality of OOP which will help
us prove many assumptions and claims made in the Elegant Objects
books.
",
        "keywords": ["class cohesion", "object cohesion", "elegant objects", "oop cohesion", "eo cohesion"]
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style>
<noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500">
    <style amp-custom="amp-custom">
      @font-face {
        font-family: 'Cambria';
        src: url('https://www.yegor256.com/fonts/cambria/2EAA54_2_0.ttf');
      }
      body { font-family: 'Cambria', 'Times New Roman', serif; padding: .5em; font-size: 1.2em; }
      article { width: 600px; max-width: 100%; margin-left: auto; margin-right: auto; }
      pre, code { font-family: 'Source Code Pro', 'Courier New', monospace; font-size: .8em; }
      code { padding: 0 .3em; background-color: lightgray; }
      a, a:hover, a:visited { color: inherit; }
      .intro { color: red; font-size: .75em; }
      .photo { border-radius: 50%; }
      pre { overflow-x:scroll; }
    </style>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <article>
      <p class="intro">
        This is a mobile version, full one is
        <a href="https://www.yegor256.com/2020/02/11/object-cohesion.html">here</a>.
      </p>
      <p>
        <amp-img src="/images/face-256x256.jpg" width="80" height="80" alt="Yegor Bugayenko" class="photo"></amp-img>
      </p>
      <p>Yegor Bugayenko<br>11 February 2020</p>
      <h1>Object Cohesion: Why It Matters</h1>
      <p>You most probably know about <a href="https://www.elegantobjects.org">Elegant Objects</a> (EO),
an alternative object-oriented paradigm, which claims that objects must
be immutable, have no
<a href="/2014/05/05/oop-alternative-to-utility-classes.html">static methods</a>,
never use
<a href="/2014/05/13/why-null-is-bad.html">NULL</a> in their code,
use <a href="/2016/04/12/java-annotations-are-evil.html">no annotations</a>,
and so on. We, the EO adepts, claim many things, but not so many people
believe us. Those non-believers <a href="/testimonials.html">say</a>
that we are trolls,
<a href="/2020/05/13/career-killer.html">at best</a>.
Their main argument is: everybody works differently,
why should we listen to you? I have no answer for them… well I had no answer, until I
created <a href="https://www.jpeek.org">jPeek</a> and started researching object <em>cohesion</em>.</p>



<amp-img src="/images/2020/02/kin-dza-dza.jpg" alt="Кин-дза-дза! by Георгий Данелия" height="720" width="1280" layout="responsive"></amp-img>

<p>Let me explain how cohesion can help us, EO adepts, to <em>prove</em> some of our
assumptions.</p>

<p><a href="https://en.wikipedia.org/wiki/Cohesion_%28computer_science%29">Cohesion</a>,
as a characteristic of a software module, was invented by
<a href="https://en.wikipedia.org/wiki/Larry_Constantine">Larry Constantine</a>
when I didn’t even exist yet, in 1974.
Here is what it means; take a look at this simple Java class:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Books</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">titles</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">prices</span><span class="o">;</span>
  <span class="kt">void</span> <span class="nf">addTitle</span><span class="o">(</span><span class="nc">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">titles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">title</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kt">void</span> <span class="nf">addPrice</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">price</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">prices</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">price</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>There are two attributes and two methods. The method <code class="language-plaintext highlighter-rouge">addTitle()</code> works with
the attribute <code class="language-plaintext highlighter-rouge">titles</code>, while the method <code class="language-plaintext highlighter-rouge">addPrice()</code> works only with the
attribute <code class="language-plaintext highlighter-rouge">prices</code>. The cohesion is <em>low</em> in this class, because the attributes
<code class="language-plaintext highlighter-rouge">titles</code> and <code class="language-plaintext highlighter-rouge">prices</code> are not related to each other in any way. We can easily
break this class into two pieces without losing anything:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Books1</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">titles</span><span class="o">;</span>
  <span class="kt">void</span> <span class="nf">addTitle</span><span class="o">(</span><span class="nc">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">titles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">title</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Books2</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">prices</span><span class="o">;</span>
  <span class="kt">void</span> <span class="nf">addPrice</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">price</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">prices</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">price</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Now, we have two much more cohesive classes: their attributes and methods
are related to each other. We can’t break <code class="language-plaintext highlighter-rouge">Books1</code> anymore, since each
attribute is needed by each method.</p>

<p>Here is yet another example of a <em>highly</em> cohesive class:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Books</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">titles</span><span class="o">;</span>
  <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="nc">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">titles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">title</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">titles</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Can we break it into smaller pieces? No, we can’t. We can’t take any part
of the class out. The attribute <code class="language-plaintext highlighter-rouge">titles</code> and both of the methods must stay
together. This means that the class is <em>highly</em> cohesive.</p>

<p>It was demonstrated a long time ago that more cohesive classes are better,
in terms of their error-proneness, than the ones with low cohesion,
for example by Victor R. Basili et al. in their study
<a href="https://pdfs.semanticscholar.org/2bb8/c1f4eeb5e5ae353adeea0fd6933551b9e932.pdf">A Validation of Object-Oriented Design Metrics as Quality Indicators</a>.</p>

<p>Now, if we can empirically prove that, for example, classes without static methods
are, on average, more cohesive than their static-rich fellows, we can say
that the claim that “static methods are evil” (postulated by Elegant Objects) is
scientifically validated. We can take a large set of
random Java classes and calculate their cohesion. Then, we can separate those
with static methods from those without them. Next, we can calculate which group
has higher average cohesion. If the group without static methods wins,
the assumption would be valid.</p>

<p>Of course, another random set of Java classes may produce different results,
but this is how empirical science works: we can’t prove the theorem other
than by some experiments.</p>



<p>I created an open source software library to help me do these experiments and called
it <a href="https://www.jpeek.org">jPeek.org</a>. It is a calculator of cohesion metrics
for Java code. No surprise, there are many metrics we can use to calculate cohesion. At least
<a href="https://www.math.md/files/csjm/v25-n1/v25-n1-%28pp44-74%29.pdf">thirty</a>
of them are published, while only a few of them were properly implemented.
In jPeek, thanks to its contributors, we managed to implement over a dozen.</p>

<p>Using this tool we can empirically prove some of the key points of EO.
For example, we can prove that
<a href="/2014/06/09/objects-should-be-immutable.html">mutable</a>
classes are less cohesive, annotations
negatively affect cohesion,
<a href="/2016/07/06/data-transfer-object.html">DTOs</a> are low-cohesion creatures,
and many other things. Thus cohesion will become the vehicle which will
drive Elegant Objects to a place where most of its claims will be scientifically
proven. Give us a few more years and we will have very interesting results.</p>

<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">A reviewer rejects your code and says: "This class is not cohesive enough!" What would you answer?</p>— Yegor Bugayenko (@yegor256) <a href="https://twitter.com/yegor256/status/1228936961035001856?ref_src=twsrc%5Etfw">February 16, 2020</a>
</blockquote>



    </article>
  </body>
</html>

<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="If you want your images, script, or CSS files be available via a CDN, use jare.io, an instant and free service." /> <meta name="keywords" content="" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Jare.io, an Instant and Free CDN"/> <meta name="twitter:description" property="og:description" content="If you want your images, script, or CSS files be available via a CDN, use jare.io, an instant and free service."/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/zh/2016/03/30/jare-instant-free-cdn.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?d864995d304"/> <link rel="apple-touch-icon" href="/favicon.ico?d864995d304"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?d864995d304"/> <link rel="stylesheet" href="/css/icons.css?d864995d304"/> <link rel="canonical" href="https://www.yegor256.com/zh/2016/03/30/jare-instant-free-cdn.html" /> <title>Jare.io, an Instant and Free CDN</title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My Stack Overflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;391</a></li> <li ><a href="/teaching.html" title="My courses and lectures">Teaching</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/research.html" title="My research directions and progress">Research</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Art</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке о политике в России, Украине и мире">Политика</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><h1 itemprop="name headline mainEntityOfPage">Jare.io, an Instant and Free CDN</h1></header> <article class="main" itemprop="articleBody" style="font-family: sans-serif; font-size: 0.9em; line-height: 1.2em;"><p style="color: #C42C00;">The following text is a <em>partial</em> translation of the <a href='https://www.yegor256.com/2016/03/30/jare-instant-free-cdn.html'>original English article</a>, performed by <a href="https://chat.openai.com/">ChatGPT</a> (gpt-3.5-turbo) and <a href="https://github.com/yegor256/jekyll-chatgpt-translate">this Jekyll plugin</a>:</p><p>CDN 指的是内容分发网络。从技术上讲，它是位于不同国家和大陆的一组服务器。你将你的 <code class="language-plaintext highlighter-rouge">logo.gif</code> 给它们，它们会给你一个 URL，这个 URL 会根据尝试解析它的用户而解析到不同的服务器上。因此，文件总是接近最终用户，你的网站加载速度比没有 CDN 的情况下要快得多。听起来不错，但所有 CDN 供应商都需要为他们的服务收费，通常还需要相当复杂的设置和注册过程。我的个人项目 <a href="http://www.jare.io">jare.io</a> 是一个免费的 CDN，非常容易配置。它利用 AWS CloudFront 资源。</p><p>首先，让我展示一下它是如何工作的，然后如果你对细节感兴趣，我将解释它是如何在内部完成的。假设你有以下 HTML：</p><p>我希望通过CDN传送这个<code class="language-plaintext highlighter-rouge">logo.svg</code>。这需要两个步骤。首先，我在<a href="http://www.jare.io">jare.io</a>注册我的域名：</p><p>然后，我更改我的HTML代码：</p><p>That’s it.</p><p>尝试使用您自己的资源，您会发现加载速度会快得多。</p><p>这是完全免费的，但我要求您要合理使用。如果您的流量很大，您需要在CloudFront或其他地方拥有自己的账户。我的服务适用于小型项目。</p><p>现在，对于更多技术细节，如果您想了解这个解决方案的技术原理。首先，让我们讨论CDN是什么以及它是如何工作的。</p><p>当您的浏览器想要加载一张图片时，它会有一个<a href="https://en.wikipedia.org/wiki/Uniform_Resource_Locator">URL</a>，就像上面的例子一样。这就是URL：<code class="language-plaintext highlighter-rouge">http://www.teamed.io/image/logo.svg</code>。这个地址有三个重要部分。第一个是<code class="language-plaintext highlighter-rouge">http</code>，即<a href="https://en.wikipedia.org/wiki/Communications_protocol">协议</a>。第二个是<code class="language-plaintext highlighter-rouge">www.teamed.io</code>，即<a href="https://en.wikipedia.org/wiki/Host_%28network%29">主机</a>名，以及尾部的<code class="language-plaintext highlighter-rouge">/images/logo.svg</code>，它是<a href="https://en.wikipedia.org/wiki/Uniform_Resource_Identifier#Syntax">路径</a>。为了加载这张图片，浏览器必须打开一个<a href="https://en.wikipedia.org/wiki/Network_socket">套接字</a>，连接您的计算机和存储图片的服务器。为了打开套接字，浏览器需要知道服务器的<a href="https://en.wikipedia.org/wiki/IP_address">IP地址</a>。</p><p>在该URL中没有这样的地址。为了找到IP地址，浏览器正在进行所谓的查找操作。它连接到最近的<a href="https://en.wikipedia.org/wiki/Name_server">名称服务器</a>，并询问：“www.teamed.io的IP地址是什么？”答案通常包含一个IP地址：</p><p>在撰写本文时，“www.teamed.io”的IP地址为“199.27.79.133”。</p><p>当地址已知时，浏览器会打开一个新的套接字并通过它发送一个HTTP请求。</p><p>服务器以一个<a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Response_message">HTTP响应</a>作出回应：</p><p>那就是我们正在寻找的<a href="https://en.wikipedia.org/wiki/Scalable_Vector_Graphics">SVG</a>图像。浏览器在网页上渲染它，就是这样。</p><p>目前为止都还不错，但是如果你的浏览器与该IP地址之间的距离相当大，加载图像将需要很长时间。嗯，数百毫秒。试着加载这张图片，它位于捷克共和国的布拉格市托管的服务器上（我正在使用<a href="https://josephscott.org/archives/2011/10/timing-details-with-curl/"><code class="language-plaintext highlighter-rouge">curl</code></a>，如此处所建议）。</p><p>我试图从加利福尼亚州的帕洛阿尔托做这件事，那里距离布拉格隔了半个地球。正如你所见，需要超过500毫秒的时间。这太长了，尤其是如果一个网页包含很多图片的话。总体而言，页面加载可能需要几秒钟，只是因为服务器离我太远了。无论我们将它托管在哪里，它都将不可避免地离一些用户太远。如果我们将其托管在加利福尼亚州，它将离我足够近，图片将立即加载（少于50毫秒）。但对于布拉格的用户来说，它将会太慢。</p><p>如果服务器以某种独特的方式动态生成图片或页面，并且我们无法在不同国家和大陆安装多个服务器，那么这个问题就没有解决方案。但在大多数情况下，比如我们的徽标示例，这不是一个问题。这个徽标不需要为每个用户都是独一无二的。它是一个非常“静态”的资源，只需要创建一次，然后传递给每个人，不做任何更改。</p><p>那么，我们在加利福尼亚某处安装一个服务器，让加利福尼亚的用户连接到它怎么样？当一个对<code class="language-plaintext highlighter-rouge">logo.gif</code>的请求发送到其中一个“边缘”服务器时，它将连接到布拉格的中央服务器并加载文件。这将只发生一次。之后，边缘服务器将不再从中央服务器请求文件。它将立即从其内部缓存中返回文件。</p><p>我们需要有许多边缘服务器，最好分布在我们的用户可能所在的所有国家。第一个请求会花费更长的时间，但所有其他请求都会更快，因为它们将从最近的边缘服务器提供服务。</p><p>现在，问题是浏览器如何知道哪个边缘服务器是最近的，对吧？我们只需欺骗域名解析过程。根据询问者的身份，DNS将给出不同的答案。以<code class="language-plaintext highlighter-rouge">cf.jare.io</code>为例（它是负责在AWS CloudFront中传送我们内容的所有边缘服务器的名称，是<code class="language-plaintext highlighter-rouge">djk1be5eatcae.cloudfront.net</code>的CNAME）。如果我从加利福尼亚查询它，我会得到以下答案：</p><p>位于<a href="https://db-ip.com/54.230.141.211">旧金山</a>的边缘服务器的IP地址是<code class="language-plaintext highlighter-rouge">54.230.141.211</code>。这离我相当近，距离不到50英里。如果我从弗吉尼亚的服务器执行相同的操作，我会得到一个不同的响应：</p><p>位于<a href="https://db-ip.com/52.85.131.217">华盛顿</a>的边缘服务器具有IP地址<code class="language-plaintext highlighter-rouge">52.85.131.217</code>，它离我很远，但离我进行查找的服务器非常近。</p><p>全球有成千上万个名称服务器，它们都有关于<code class="language-plaintext highlighter-rouge">cf.jare.io</code>边缘服务器实际位置的不同信息。根据询问者的身份，答案也会不同。</p><p><a href="https://aws.amazon.com/cloudfront/">CloudFront</a> 是最简单的 CDN 解决方案之一。要通过它们的边缘节点开始传递内容，您只需创建一个“分发”并进行配置即可。分发基本上是内容源和边缘服务器之间的连接：</p><p>skinparam componentStyle uml2 浏览器 -right-&gt; [边缘服务器] [边缘服务器] -right-&gt; [中央服务器] [中央服务器] -right-&gt; [源服务器]</p><p>边缘服务器之一收到一个 HTTP 请求。如果它的缓存中已有该 <code class="language-plaintext highlighter-rouge">logo.svg</code>，它会立即返回一个带有内容的 HTTP 响应。如果它的缓存为空，边缘服务器会向中央服务器发出一个 HTTP 请求。中央服务器了解“分发”及其配置。它与源服务器建立一个 HTTP 连接，源服务器是 <code class="language-plaintext highlighter-rouge">www.teamed.io</code>，并要求它返回 <code class="language-plaintext highlighter-rouge">logo.svg</code>。完成后，图像会返回到边缘服务器，然后被缓存。</p><p>这看起来相当简单，但并非免费且配置起来并不那么快速。您需要在 CloudFront 上创建一个帐户，注册您的信用卡并获得批准。然后您需要创建一个分发并进行配置。您还应该在您的域名服务器中创建该 CNAME。如果只是为一个网站这样做，那没什么大不了的。但如果有十几个网站，这将是一个耗时的操作。</p><p>Jare.io 是该图表中的一个额外组件，可以让您的生活更轻松：</p><p>skinparam componentStyle uml2 浏览器 -right-&gt; [边缘] [边缘] -right-&gt; [中央] [中央] -down-&gt; [中继] [中继] -right-&gt; [源]</p><p>Jare.io 有一个”中继”，它充当 CloudFront 的源服务器。所有到达 <code class="language-plaintext highlighter-rouge">cf.jare.io</code> 的请求都会被派发到中继。中继根据 HTTP 请求 URI 中的信息决定如何处理这些请求。例如，来自浏览器的请求具有以下 URI 路径：</p><p>请记住，请求是发送到<code class="language-plaintext highlighter-rouge">cf.jare.io</code>，这是边缘服务器的地址。这个确切的URI到达<code class="language-plaintext highlighter-rouge">relay.jare.io</code>。URI包含足够的信息来决定返回哪个文件。中继器向<code class="language-plaintext highlighter-rouge">www.teamed.io</code>发出新的HTTP请求并检索图像。</p><p>这种解决方案的美妙之处在于它很容易。对于小型网站来说，这是一个免费且快速的CDN。</p><p>顺便说一下，当我们通过jare.io（和CloudFront）查询相同的图像时，它返回得更快：</p><p>大部分工作由AWS CloudFront完成，而jare.io只是一个中继，使其配置更加方便。此外，jare.io是免费的，因为它得到了<a href="https://www.zerocracy.com">Zerocracy</a>的赞助。换句话说，我的公司将为您使用CloudFront付费。如果您能牢记这一点，并不将jare.io用于流量密集的资源，我将不胜感激。</p><p class="jekyll-chatgpt-translate">Translated by ChatGPT gpt-3.5-turbo/42 on 2023-11-22 at 10:29</p></article></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2023</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="https://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge" /></a> &nbsp; <a href="https://github.com/yegor256/blog/stargazers"> <img src="//img.shields.io/github/stars/yegor256/blog.svg?style=flat-square" alt="GitHub stars" /></a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?d864995d304"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>

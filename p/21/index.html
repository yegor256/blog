<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" itemprop="description" content="Yegor Bugayenko blogging about object-oriented programming, Java, project management, philosophy, and startup investments; at least one new post every week. (page 21) " /> <meta name="keywords" itemprop="keywords" content="high quality programming, java, java blog, programming blog, quality of software, software blog, software development blog, yegor bugayenko blog" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="og:site_name" itemprop="name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Blog About Computers"/> <meta name="twitter:description" property="og:description" content="Yegor Bugayenko blogging about object-oriented programming, Java, project management, philosophy, and startup investments; at least one new post every week. "/> <meta name="twitter:url" property="og:url" content="http://www.yegor256.com/p/21/"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?f7d566b"/> <link rel="apple-touch-icon" href="/favicon.ico?f7d566b"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?f7d566b"/> <link rel="stylesheet" href="/css/icons.css?f7d566b"/> <link rel="canonical" href="http://www.yegor256.com/p/21/" itemprop="url" /> <link rel="amphtml" href="http://www.yegor256.com/p/21/" /> <title>Blog About Computers (page 21) </title> <meta name='og:image' content='http://www.yegor256.com/images/face-1400x1400.jpg'/><meta name='twitter:image' content='http://www.yegor256.com/images/face-1400x1400.jpg'/><meta name='og:image:width' content='1400'/> <meta name='twitter:image:width' content='1400'/><meta name='og:image:height' content='1400'/> <meta name='twitter:image:height' content='1400'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Main picture'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html"> <img src="//cf.jare.io/?u=http://www.yegor256.com/images/yegor-bugayenko-192x192.png" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" re="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://gitter.im/yegor256/elegantobjects" rel="nofollow" title="Our OOP Gitter chat"><i class="icon icon-gitter notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li><a href="/contents.html" title="The contents of the entire blog">All&#160;232</a></li> <li><a href="/webinars.html" title="My webinars">Webinars</a></li> <li><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li><a href="/books.html" title="The books I wrote">Books</a></li> <li><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li><a href="/award.html" title="Software quality award">Award</a></li> <li><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> Elegant Objects <strong>Vol.2</strong> is available <a href="http://amzn.to/2pD42k3">on Amazon</a>! </li> <li> At <a href="/webinars.html">Webinar #25</a> we'll discuss the difference between micro-management and micro-tasking, join us on <b>June 7</b>, at 11am PST. </li> <li> Meet me at <a href="http://jeeconf.com/speaker/yegor-bugayenko-2/">JEEConf</a> (Kiev/May-26), <a href="http://jug.ua/">JUG.ua</a> (Kharkiv/Jun-1), <a href="http://javaday.by/">JavaDay</a> (Minsk/Jun-3), <a href="http://www.jdk.io/">JDK.io</a> (Copenhagen/Jun-19), and later <a href="/talks.html">somewhere else</a>. </li></ul></div></header></div><div itemscope="" itemtype="http://schema.org/Blog"><div class="wrapper"> <section class="front" itemprop="blogPosts" itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="author" itemtype="http://schema.org/Person"/> <meta itemprop="name" content="Yegor Bugayenko"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><header><h1> <a href="/2014/06/01/aop-aspectj-java-method-logging.html"> <span itemprop="name headline mainEntityOfPage">Java Method Logging with AOP and Annotations</span> </a></h1><ul class="subline"> <li> <time itemprop="datePublished dateModified" datetime="2014-06-01T00:00:00+00:00"> 1 June 2014 </time> </li> <li itemprop="wordCount"> 989 words </li> <li> four minutes to read </li> <li> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul></header><div class="main" itemprop="description"><p>Sometimes, I want to log (through <a href="http://www.slf4j.org">slf4j</a> and <a href="http://logging.apache.org/log4j/2.x/">log4j</a>) every execution of a method, seeing what arguments it receives, what it returns and how much time every execution takes. This is how I&#39;m doing it, with help of <a href="http://eclipse.org/aspectj/">AspectJ</a>, <a href="http://aspects.jcabi.com">jcabi-aspects</a> and Java 6 <a href="/2016/04/12/java-annotations-are-evil.html">annotations</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="nd">@Loggable</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">power</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">p</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is what I see in log4j output:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>[INFO] com.example.Foo #power(2, 10): 1024 in 12μs
[INFO] com.example.Foo #power(3, 3): 27 in 4μs</code></pre></figure><p>Nice, isn&#39;t it? Now, let&#39;s see how it works.</p></div><p> <a href="/2014/06/01/aop-aspectj-java-method-logging.html" itemprop="url"> continue... </a></p></section></div><div class="wrapper"> <section class="front" itemprop="blogPosts" itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="author" itemtype="http://schema.org/Person"/> <meta itemprop="name" content="Yegor Bugayenko"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><header><h1> <a href="/2014/05/26/amazon-s3-java-oop-adapter.html"> <span itemprop="name headline mainEntityOfPage">Object-Oriented Java Adapter of Amazon S3 SDK</span> </a></h1><ul class="subline"> <li> <time itemprop="datePublished dateModified" datetime="2014-05-26T00:00:00+00:00"> 26 May 2014 </time> </li> <li itemprop="wordCount"> 556 words </li> <li> three minutes to read </li> <li> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/26/amazon-s3-java-oop-adapter.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul></header><div class="main" itemprop="description"> <figure class='badge'><img src='http://www.yegor256.com/images/2014/05/s3-logo.png' style='width:150px;max-width:100%;' alt='badge'/></figure><p>I&#39;m a big fan of Amazon Web Services (AWS). I&#39;m using them in almost all of my projects. One of their most popular services is <a href="http://aws.amazon.com/s3/">Simple Storage Service (S3)</a>. It is a storage for binary objects (files) with unique names, accessible through HTTP or RESTful API.</p><p>Using S3 is very simple. You create a &quot;bucket&quot; with a unique name, upload your &quot;object&quot; into the bucket through their web interface or through RESTful API, and then download it again (either through HTTP or the API.)</p><p>Amazon ships the <a href="https://aws.amazon.com/sdkforjava/">Java SDK</a> that wraps their RESTful API. However, this SDK is not object-oriented at all. It is purely imperative and procedural&mdash;it just mirrors the API.</p><p>For example, in order to download an existing object <code>doc.txt</code> from bucket <code>test-1</code>, you have to do something like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">AWSCredentials</span> <span class="n">creds</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BasicAWSCredentials</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">secret</span><span class="o">);</span>
<span class="n">AmazonS3</span> <span class="n">aws</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AmazonS3Client</span><span class="o">(</span><span class="n">creds</span><span class="o">);</span>
<span class="n">S3Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="na">getObject</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">GetObjectRequest</span><span class="o">(</span><span class="s">&quot;test-1&quot;</span><span class="o">,</span> <span class="s">&quot;doc.txt&quot;</span><span class="o">)</span>
<span class="o">);</span>
<span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="na">getObjectContent</span><span class="o">();</span>
<span class="n">String</span> <span class="n">content</span> <span class="o">=</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">);</span>
<span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span></code></pre></figure> <figure class='badge'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></figure><p>As always, procedural programming has its inevitable disadvantages. To overcome them all, I designed <a href="http://s3.jcabi.com">jcabi-s3</a>, which is a small object-oriented adapter for Amazon SDK. This is how the same object-reading task can be accomplished with <a href="http://s3.jcabi.com">jcabi-s3</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Region</span> <span class="n">region</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Region</span><span class="o">.</span><span class="na">Simple</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">secret</span><span class="o">);</span>
<span class="n">Bucket</span> <span class="n">bucket</span> <span class="o">=</span> <span class="n">region</span><span class="o">.</span><span class="na">bucket</span><span class="o">(</span><span class="s">&quot;test-1&quot;</span><span class="o">);</span>
<span class="n">Ocket</span> <span class="n">ocket</span> <span class="o">=</span> <span class="n">bucket</span><span class="o">.</span><span class="na">ocket</span><span class="o">(</span><span class="s">&quot;doc.txt&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">content</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Ocket</span><span class="o">.</span><span class="na">Text</span><span class="o">(</span><span class="n">ocket</span><span class="o">).</span><span class="na">read</span><span class="o">();</span></code></pre></figure><p>Why is this approach better? Well, there are a number of obvious advantages.</p></div><p> <a href="/2014/05/26/amazon-s3-java-oop-adapter.html" itemprop="url"> continue... </a></p></section></div><div class="wrapper"> <section class="front" itemprop="blogPosts" itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="author" itemtype="http://schema.org/Person"/> <meta itemprop="name" content="Yegor Bugayenko"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><header><h1> <a href="/2014/05/23/avoid-java-static-logger.html"> <span itemprop="name headline mainEntityOfPage">Get Rid of Java Static Loggers</span> </a></h1><ul class="subline"> <li> <time itemprop="datePublished dateModified" datetime="2014-05-23T00:00:00+00:00"> 23 May 2014 </time> </li> <li itemprop="wordCount"> 148 words </li> <li> a minute to read </li> <li> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/23/avoid-java-static-logger.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul></header><div class="main" itemprop="description"><p>This is a very common practice in Java (using <a href="http://www.slf4j.org/apidocs/org/slf4j/LoggerFactory.html"><code>LoggerFactory</code></a> from <a href="http://www.slf4j.org/">slf4j</a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.slf4j.LoggerFactory</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">LOGGER</span> <span class="o">=</span>
    <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">Foo</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">String</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// save the file</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">Foo</span><span class="o">.</span><span class="na">LOGGER</span><span class="o">.</span><span class="na">isInfoEnabled</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">Foo</span><span class="o">.</span><span class="na">LOGGER</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&quot;file {} saved successfuly&quot;</span><span class="o">,</span> <span class="n">file</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>What&#39;s wrong with it? Code duplication.</p></div><p> <a href="/2014/05/23/avoid-java-static-logger.html" itemprop="url"> continue... </a></p></section></div><div class="wrapper"> <section class="front" itemprop="blogPosts" itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="author" itemtype="http://schema.org/Person"/> <meta itemprop="name" content="Yegor Bugayenko"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><header><h1> <a href="/2014/05/21/mysql-maven-plugin.html"> <span itemprop="name headline mainEntityOfPage">MySQL Maven Plugin</span> </a></h1><ul class="subline"> <li> <time itemprop="datePublished dateModified" datetime="2014-05-21T00:00:00+00:00"> 21 May 2014 </time> </li> <li itemprop="wordCount"> 577 words </li> <li> three minutes to read </li> <li> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul></header><div class="main" itemprop="description"><p>I was using MySQL in a few Java web projects and found out there was no Maven plugin that would help me to test my DAO classes against a real MySQL server. There are plenty of mechanisms to mock a database persistence layer both in memory and on disc. However, it is always good to make sure that your classes are tested against a database identical to the one you have in production environment.</p><figure class='badge'><a href='http://mysql.jcabi.com'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p>I&#39;ve created my own Maven plugin, <a href="http://mysql.jcabi.com">jcabi-mysql-maven-plugin</a>, that does exactly two things: starts a MySQL server on <code>pre-integration-test</code> phase and shuts it down on <code>post-integration-test</code>.</p></div><p> <a href="/2014/05/21/mysql-maven-plugin.html" itemprop="url"> continue... </a></p></section></div><div class="wrapper"> <section class="front" itemprop="blogPosts" itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="author" itemtype="http://schema.org/Person"/> <meta itemprop="name" content="Yegor Bugayenko"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><header><h1> <a href="/2014/05/18/cloud-autoincrement-counters.html"> <span itemprop="name headline mainEntityOfPage">Atomic Counters at Stateful.co</span> </a></h1><ul class="subline"> <li> <time itemprop="datePublished dateModified" datetime="2014-05-18T00:00:00+00:00"> 18 May 2014 </time> </li> <li itemprop="wordCount"> 360 words </li> <li> two minutes to read </li> <li> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/18/cloud-autoincrement-counters.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul></header><div class="main" itemprop="description"> <figure class='badge'><img src='http://www.yegor256.com/images/2014/04/dynamodb-logo.png' style='width:150px;max-width:100%;' alt='badge'/></figure><p>Amazon DynamoDB is a great NoSQL cloud database. It is cheap, highly reliable and rather powerful. I&#39;m using it in many web systems.</p><p>There is one feature that it lacks, though&mdash;auto-increment attributes.</p><p>Say that you have a table with a list of messages:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>+------+----------------------------+
| id   | Attributes                 |
+------+----------------------------+
| 205  | author=&quot;jeff&quot;, text=&quot;...&quot;  |
| 206  | author=&quot;bob&quot;, text=&quot;...&quot;   |
| 207  | author=&quot;alice&quot;, text=&quot;...&quot; |
+------+----------------------------+</code></pre></figure><p>Every time you add a new item to the table, a new value of <code>id</code> has to be set. And this has to be done with concurrency in mind. SQL databases like PostgreSQL, Oracle, MySQL and others support auto-increment features. When you add a new record to the table, the value of the primary key is omitted and the server retrieves the next one automatically. If a number of <code>INSERT</code> requests arrive at the same time the server guarantees that the numbers won&#39;t be duplicated.</p><p>However, DynamoDB doesn&#39;t have this feature. Instead, DynamoDB has <a href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithItems.html#WorkingWithItems.AtomicCounters">Atomic Counters</a> and <a href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithItems.html#WorkingWithItems.ConditionalUpdate">Conditional Updates</a>, which are very similar features. Still, they&#39;re not exactly the same.</p><p>In case of an atomic counter, you should create a supplementary table and keep the latest value of <code>id</code> in it.</p><p>In case of conditional updates, you should <a href="/2014/08/15/retry-java-method-on-exception.html">retry</a> a few times in case of collisions.</p><figure class='badge'><img src='http://img.stateful.co/pomegranate.svg' style='width:128px;max-width:100%;' alt='badge'/></figure><p>To make life easier in a few of my applications, I created a simple web service&mdash;<a href="http://www.stateful.co">stateful.co</a>. It provides a simple atomic counter feature through its RESTful API.</p></div><p> <a href="/2014/05/18/cloud-autoincrement-counters.html" itemprop="url"> continue... </a></p></section></div><div class="wrapper"> <section class="front" itemprop="blogPosts" itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="author" itemtype="http://schema.org/Person"/> <meta itemprop="name" content="Yegor Bugayenko"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><header><h1> <a href="/2014/05/14/object-oriented-github-java-sdk.html"> <span itemprop="name headline mainEntityOfPage">Object-Oriented GitHub API</span> </a></h1><ul class="subline"> <li> <time itemprop="datePublished dateModified" datetime="2014-05-14T00:00:00+00:00"> 14 May 2014 </time> </li> <li itemprop="wordCount"> 503 words </li> <li> two minutes to read </li> <li> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/14/object-oriented-github-java-sdk.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul></header><div class="main" itemprop="description"> <figure class='badge'><img src='http://www.yegor256.com/images/2014/05/github-logo.png' style='width:128px;max-width:100%;' alt='badge'/></figure><p><a href="http://www.github.com">GitHub</a> is an awesome platform for maintaining Git sources and tracking project issues. I moved all my projects (both private and public) to GitHub about three years ago and have no regrets. Moreover, GitHub gives access to almost all of its features through RESTful JSON API.</p><p>There are <a href="https://developer.github.com/libraries/">a few</a> Java SDK-s that wrap and expose the API. I tried to use them, but faced a number of issues:</p><ul> <li>They are not really object-oriented (even though one of them has a description that says it is)</li> <li>They are not based on JSR-353 (JSON Java API)</li> <li>They provide no mocking instruments</li> <li>They don&#39;t cover the entire API and can&#39;t be extended</li></ul><figure class='badge'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></figure><p>Keeping in mind all those drawbacks, I created my own library&mdash;<a href="http://github.jcabi.com">jcabi-github</a>. Let&#39;s look at its most important advantages.</p></div><p> <a href="/2014/05/14/object-oriented-github-java-sdk.html" itemprop="url"> continue... </a></p></section></div><div class="wrapper"> <section class="front" itemprop="blogPosts" itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="author" itemtype="http://schema.org/Person"/> <meta itemprop="name" content="Yegor Bugayenko"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><header><h1> <a href="/2014/05/13/why-null-is-bad.html"> <span itemprop="name headline mainEntityOfPage">Why NULL is Bad?</span> </a></h1><ul class="subline"> <li> <time itemprop="datePublished dateModified" datetime="2014-05-13T00:00:00+00:00"> 13 May 2014 </time> </li> <li itemprop="wordCount"> 973 words </li> <li> four minutes to read </li> <li> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/13/why-null-is-bad.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul></header><div class="main" itemprop="description"><p>A simple example of <code>NULL</code> usage in Java:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>What is wrong with this method?</p></div><p> <a href="/2014/05/13/why-null-is-bad.html" itemprop="url"> continue... </a></p></section></div><div class="wrapper"> <section class="front" itemprop="blogPosts" itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="author" itemtype="http://schema.org/Person"/> <meta itemprop="name" content="Yegor Bugayenko"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><header><h1> <a href="/2014/05/05/oop-alternative-to-utility-classes.html"> <span itemprop="name headline mainEntityOfPage">OOP Alternative to Utility Classes</span> </a></h1><ul class="subline"> <li> <time itemprop="datePublished dateModified" datetime="2014-05-05T00:00:00+00:00"> 5 May 2014 </time> </li> <li itemprop="wordCount"> 704 words </li> <li> three minutes to read </li> <li> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul></header><div class="main" itemprop="description"><p>A utility class (aka helper class) is a &quot;structure&quot; that has only static methods and encapsulates no state. <code>StringUtils</code>, <code>IOUtils</code>, <code>FileUtils</code> from <a href="http://commons.apache.org/">Apache Commons</a>; <code>Iterables</code> and <code>Iterators</code> from <a href="https://code.google.com/p/guava-libraries/">Guava</a>, and <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html"><code>Files</code></a> from JDK7 are perfect examples of utility classes.</p><p>This design idea is very popular in the Java world (as well as C#, Ruby, etc.) because utility classes provide common functionality used everywhere.</p><p>Here, we want to follow the <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY principle</a> and avoid duplication. Therefore, we place common code blocks into utility classes and reuse them when necessary:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="c1">// This is a terrible design, don&#39;t reuse</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NumberUtils</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">max</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span> <span class="o">?</span> <span class="n">a</span> <span class="o">:</span> <span class="n">b</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Indeed, this a very convenient technique!?</p></div><p> <a href="/2014/05/05/oop-alternative-to-utility-classes.html" itemprop="url"> continue... </a></p></section></div><div class="wrapper"> <section class="front" itemprop="blogPosts" itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="author" itemtype="http://schema.org/Person"/> <meta itemprop="name" content="Yegor Bugayenko"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><header><h1> <a href="/2014/05/01/dynamodb-local-maven-plugin.html"> <span itemprop="name headline mainEntityOfPage">DynamoDB Local Maven Plugin</span> </a></h1><ul class="subline"> <li> <time itemprop="datePublished dateModified" datetime="2014-05-01T00:00:00+00:00"> 1 May 2014 </time> </li> <li itemprop="wordCount"> 383 words </li> <li> two minutes to read </li> <li> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/01/dynamodb-local-maven-plugin.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul></header><div class="main" itemprop="description"> <figure class='badge'><a href='http://aws.amazon.com/dynamodb'><img src='http://www.yegor256.com/images/2014/04/dynamodb-logo.png' style='width:150px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Tools.html">DynamoDB Local</a> is a locally running copy of Amazon DynamoDB server. Amazon developed the tool and based it on SQLite. It acts as a real DynamoDB service through the RESTful API.</p><p>I guess, DynamoDB Local is meant to be used in integration testing and this is how we&#39;re going to use it below.</p><p>I use Maven to run all of my Java integration testing using <a href="http://maven.apache.org/surefire/maven-failsafe-plugin/"><code>maven-failsafe-plugin</code></a>. The philosophy of integration testing with Maven is that you start all your supplementary test stubs during the <code>pre-integration-test</code> phase, run your tests in the <code>integration-test</code> phase and then shutdown all stubs during the <code>post-integration-test</code>.</p><figure class='badge'><a href='http://dynamodb.jcabi.com'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p>It would be great if it were possible to use DynamoDB Local that way. I didn&#39;t find any Maven plugins for that purpose, so I decided to create my own&mdash;<a href="https://github.com/jcabi/jcabi-dynamodb-maven-plugin">jcabi-dynamodb-maven-plugin</a>.</p></div><p> <a href="/2014/05/01/dynamodb-local-maven-plugin.html" itemprop="url"> continue... </a></p></section></div><div class="wrapper"> <section class="front" itemprop="blogPosts" itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="author" itemtype="http://schema.org/Person"/> <meta itemprop="name" content="Yegor Bugayenko"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><header><h1> <a href="/2014/04/29/w3c-java-validators.html"> <span itemprop="name headline mainEntityOfPage">W3C Java Validators</span> </a></h1><ul class="subline"> <li> <time itemprop="datePublished dateModified" datetime="2014-04-29T00:00:00+00:00"> 29 April 2014 </time> </li> <li itemprop="wordCount"> 191 words </li> <li> a minute to read </li> <li> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/04/29/w3c-java-validators.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul></header><div class="main" itemprop="description"> <figure class='badge'><a href='http://w3c.jcabi.com'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p>A few years ago, I created two Java wrappers for W3C validators: (<a href="http://validator.w3.org/">HTML</a> and <a href="http://jigsaw.w3.org/css-validator/">CSS</a>). Both wrappers seemed to be working fine and were even listed by W3C on <a href="http://validator.w3.org/docs/api.html">their website</a> in the API section. Until recently, these wrappers have always been part of <a href="https://github.com/yegor256/rexsl">ReXSL</a> library.</p><p>A few days ago, though, I took the wrappers out of ReXSL and published them as a standalone library&mdash;<a href="http://w3c.jcabi.com">jcabi-w3c</a>. Consequently, now seems to be a good time to write a few words about them.</p><p>Below is an example that demonstrates how you can validate an HTML document against W3C compliance rules:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">com.jcabi.w3c.ValidatorBuilder</span><span class="o">;</span>
<span class="k">assert</span> <span class="n">ValidatorBuilder</span><span class="o">.</span><span class="na">html</span><span class="o">()</span>
  <span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="s">&quot;&lt;html&gt;hello, world!&lt;/html&gt;&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">valid</span><span class="o">();</span></code></pre></figure></div><p> <a href="/2014/04/29/w3c-java-validators.html" itemprop="url"> continue... </a></p></section></div><div><div class="wrapper"> <footer><div class="pagination"><div class="left"> <a href="/p/20"><i class="icon icon-fast-backward"></i></a></div>page 21 of 24<div class="right"> <a href="/p/22"><i class="icon icon-fast-forward"></i></a></div></div></footer></div><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="http://www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?f7d566b"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script language="javascript" type="text/javascript"> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script language="javascript1.1" type="text/javascript"> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script language="javascript1.2" type="text/javascript"> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script language="javascript" type="text/javascript"> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> </body> </html>

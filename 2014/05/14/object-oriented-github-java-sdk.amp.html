<!DOCTYPE html>
<html amp lang="en">
  <head>

    <meta charset="utf-8">
    <title>Object-Oriented GitHub API</title>
    <link rel="canonical" href="https://www.yegor256.com/2014/05/14/object-oriented-github-java-sdk.html">
    <link rel="icon" type="image/png" href="/favicon.ico">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage":{
          "@type": "WebPage",
          "@id": "https://www.yegor256.com/2014/05/14/object-oriented-github-java-sdk.html"
        },
        "headline": "Object-Oriented GitHub API",
        "image": {
          "@type": "ImageObject",
          "url": "https://www.yegor256.com/images/face-1200x1200.jpg",
          "height": 1400,
          "width": 1400
        },
        "datePublished": "2014-05-14",
        "dateModified": "2014-05-14",
        "author": {
          "@type": "Person",
          "name": "Yegor Bugayenko"
        },
        "publisher": {
          "@type": "Organization",
          "name": "yegor256.com",
          "logo": {
            "@type": "ImageObject",
            "url": "https://www.yegor256.com/images/face-512x512.jpg",
            "width": 512,
            "height": 512
          }
        },
        "description": "Since none of the existing Java API-s are truly object-oriented
or elegant enough for our quality standards, we
decided to create a new one with the best principles of OOP in mind.
",
        "keywords": ["github api", "github java api", "github object oriented java api", "best github java api", "java api github", "java github api", "object oriented github java api", "java api design"]
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style>
<noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500">
    <style amp-custom="amp-custom">
      @font-face {
        font-family: 'Cambria';
        src: url('https://www.yegor256.com/fonts/cambria/2EAA54_2_0.ttf');
      }
      body { font-family: 'Cambria', 'Times New Roman', serif; padding: .5em; font-size: 1.2em; }
      article { width: 600px; max-width: 100%; margin-left: auto; margin-right: auto; }
      pre, code { font-family: 'Source Code Pro', 'Courier New', monospace; font-size: .8em; }
      code { padding: 0 .3em; background-color: lightgray; }
      a, a:hover, a:visited { color: inherit; }
      .intro { color: red; font-size: .75em; }
      .photo { border-radius: 50%; }
      pre { overflow-x:scroll; }
    </style>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <article>
      <p class="intro">
        This is a mobile version, full one is
        <a href="https://www.yegor256.com/2014/05/14/object-oriented-github-java-sdk.html">here</a>.
      </p>
      <p>
        <amp-img src="/images/face-256x256.jpg" width="80" height="80" alt="Yegor Bugayenko" class="photo"></amp-img>
      </p>
      <p>Yegor Bugayenko<br>14 May 2014</p>
      <h1>Object-Oriented GitHub API</h1>
      

<p><a href="https://www.github.com">GitHub</a> is an awesome platform for maintaining Git sources and
tracking project issues. I moved all my projects (both private and public)
to GitHub about three years ago and have no regrets. Moreover,
GitHub gives access to almost all of its features through RESTful JSON API.</p>

<p>There are <a href="https://developer.github.com/libraries/">a few</a>
Java SDK-s that wrap and expose the API. I tried to use them,
but faced a number of issues:</p>

<ul>
  <li>They are not really object-oriented (even though one of them has a description that says it is)</li>
  <li>They are not based on JSR-353 (JSON Java API)</li>
  <li>They provide no mocking instruments</li>
  <li>They don’t cover the entire API and can’t be extended</li>
</ul>



<p>Keeping in mind all those drawbacks, I created my
own library—<a href="https://github.jcabi.com">jcabi-github</a>.
Let’s look at its most important advantages.</p>



<h2 id="object-oriented-for-real">Object Oriented for Real</h2>

<p>GitHub server is an object. A collection of issues is an object,
an individual issue is an object, its author is an author, etc.
For example, to retrieve the name of the author we use:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">GitHub</span> <span class="n">github</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RtGitHub</span><span class="o">(</span><span class="cm">/* credentials */</span><span class="o">);</span>
<span class="nc">Repos</span> <span class="n">repos</span> <span class="o">=</span> <span class="n">github</span><span class="o">.</span><span class="na">repos</span><span class="o">();</span>
<span class="nc">Repo</span> <span class="n">repo</span> <span class="o">=</span> <span class="n">repos</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">new</span> <span class="nc">Coordinates</span><span class="o">.</span><span class="na">Simple</span><span class="o">(</span><span class="s">"jcabi/jcabi-github"</span><span class="o">));</span>
<span class="nc">Issues</span> <span class="n">issues</span> <span class="o">=</span> <span class="n">github</span><span class="o">.</span><span class="na">issues</span><span class="o">();</span>
<span class="nc">Issue</span> <span class="n">issue</span> <span class="o">=</span> <span class="n">issues</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">123</span><span class="o">);</span>
<span class="nc">User</span> <span class="n">author</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Issue</span><span class="o">.</span><span class="na">Smart</span><span class="o">(</span><span class="n">issue</span><span class="o">).</span><span class="na">author</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">author</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
</code></pre></div></div>

<p>Needless to say, <code class="language-plaintext highlighter-rouge">GitHub</code>, <code class="language-plaintext highlighter-rouge">Repos</code>, <code class="language-plaintext highlighter-rouge">Repo</code>, <code class="language-plaintext highlighter-rouge">Issues</code>, <code class="language-plaintext highlighter-rouge">Issue</code>,
and <code class="language-plaintext highlighter-rouge">User</code> are interfaces. Classes that implement them are not visible in the library.</p>

<h2 id="mock-engine">Mock Engine</h2>

<p><code class="language-plaintext highlighter-rouge">MkGitHub</code> class is a mock version of a GitHub server. It behaves
almost exactly the same as a real server and is the perfect
instrument for unit testing. For example, say that you’re
testing a method that is supposed to post a new issue to GitHub
and add a message into it. Here is how the unit test would look:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FooTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createsIssueAndPostsMessage</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">GitHub</span> <span class="n">github</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MkGitHub</span><span class="o">(</span><span class="s">"jeff"</span><span class="o">);</span>
    <span class="n">github</span><span class="o">.</span><span class="na">repos</span><span class="o">().</span><span class="na">create</span><span class="o">(</span>
      <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="n">owner</span><span class="o">).</span><span class="na">build</span><span class="o">()</span>
    <span class="o">);</span>
    <span class="k">new</span> <span class="nf">Foo</span><span class="o">().</span><span class="na">doTheThing</span><span class="o">(</span><span class="n">github</span><span class="o">);</span>
    <span class="nc">MatcherAssert</span><span class="o">.</span><span class="na">assertThat</span><span class="o">(</span>
      <span class="n">github</span><span class="o">.</span><span class="na">issues</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">comments</span><span class="o">().</span><span class="na">iterate</span><span class="o">(),</span>
      <span class="nc">Matchers</span><span class="o">.</span><span class="na">not</span><span class="o">(</span><span class="nc">Matchers</span><span class="o">.</span><span class="na">emptyIterable</span><span class="o">())</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This is much more convenient and compact than traditional
mocking via <a href="https://code.google.com/p/mockito/">Mockito</a> or a similar framework.</p>

<h2 id="extensible">Extensible</h2>

<p>It is based on JSR-353 and uses <code class="language-plaintext highlighter-rouge">jcabi-http</code> for HTTP request
processing. This combination makes it highly customizable and extensible,
when some GitHub feature is not covered by the library (and there are many of them).</p>

<p>For example, you want to get the value of <code class="language-plaintext highlighter-rouge">hireable</code> attribute of a <code class="language-plaintext highlighter-rouge">User</code>.
Class <code class="language-plaintext highlighter-rouge">User.Smart</code> doesn’t have a method for it. So, here is how you would get it:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="c1">// get it somewhere</span>
<span class="c1">// name() method exists in User.Smart, let's use it</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="nc">User</span><span class="o">.</span><span class="na">Smart</span><span class="o">(</span><span class="n">user</span><span class="o">).</span><span class="na">name</span><span class="o">());</span>
<span class="c1">// there is no hireable() method there</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">json</span><span class="o">().</span><span class="na">getString</span><span class="o">(</span><span class="s">"hireable"</span><span class="o">));</span>
</code></pre></div></div>

<p>We’re using method <code class="language-plaintext highlighter-rouge">json()</code> that returns an instance of
<a href="http://docs.oracle.com/javaee/7/api/javax/json/JsonObject.html"><code class="language-plaintext highlighter-rouge">JsonObject</code></a>
from JSR-353 (part of Java7).</p>

<p>No other library allows such direct access to JSON objects
returned by the GitHub server.</p>

<p>Let’s see another example. Say, you want to use some feature
from GitHub that is not covered by the API. You get a <code class="language-plaintext highlighter-rouge">Request</code>
object from <code class="language-plaintext highlighter-rouge">GitHub</code> interface and directly access the HTTP entry point of the server:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">GitHub</span> <span class="n">github</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RtGitHub</span><span class="o">(</span><span class="n">oauthKey</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">found</span> <span class="o">=</span> <span class="n">github</span><span class="o">.</span><span class="na">entry</span><span class="o">()</span>
  <span class="o">.</span><span class="na">uri</span><span class="o">().</span><span class="na">path</span><span class="o">(</span><span class="s">"/search/repositories"</span><span class="o">).</span><span class="na">back</span><span class="o">()</span>
  <span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="nc">Request</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
  <span class="o">.</span><span class="na">as</span><span class="o">(</span><span class="nc">JsonResponse</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="o">.</span><span class="na">getJsonObject</span><span class="o">()</span>
  <span class="o">.</span><span class="na">getNumber</span><span class="o">(</span><span class="s">"total_count"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">intValue</span><span class="o">();</span>
</code></pre></div></div>

<p><a href="https://http.jcabi.com">jcabi-http</a> HTTP client is used by <a href="https://github.jcabi.com">jcabi-github</a>.</p>

<h2 id="immutable">Immutable</h2>

<p>All classes are truly immutable and annotated with
<a href="https://aspects.jcabi.com/annotation-immutable.html"><code class="language-plaintext highlighter-rouge">@Immutable</code></a>.
This may sound like a minor benefit, but it was very important for me.
I’m using this annotation in all my projects to ensure my classes are truly immutable.</p>

<h2 id="version-08">Version 0.8</h2>

<p>A few days ago we released the latest <a href="https://github.com/jcabi/jcabi-github/releases/tag/jcabi-0.8">version 0.8</a>.
It is a major release, that included over 1200 commits. It covers the entire GitHub API and is
supposed to be very stable.
The library ships as a JAR dependency in <a href="https://repo1.maven.org/maven2/com/jcabi/jcabi-github">Maven Central</a>
(get its latest versions in <a href="http://search.maven.org/">Maven Central</a>):</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jcabi-github<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

    </article>
  </body>
</html>

<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" itemprop="description" content="Why NULL is a terrible practice in object-oriented programming? Despite the fact that it is used a lot and everywhere, this article tries to explain why you should give up this bad habit. " /> <meta name="keywords" itemprop="keywords" content="null c++, null is bad, null is evil, null java, null pointer, null reference" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="og:site_name" itemprop="name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Why NULL is Bad?"/> <meta name="twitter:description" property="og:description" content="Why NULL is a terrible practice in object-oriented programming? Despite the fact that it is used a lot and everywhere, this article tries to explain why you should give up this bad habit. "/> <meta name="twitter:url" property="og:url" content="http://www.yegor256.com/2014/05/13/why-null-is-bad.html"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?19dc0bc101"/> <link rel="apple-touch-icon" href="/favicon.ico?19dc0bc101"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?19dc0bc101"/> <link rel="stylesheet" href="/css/icons.css?19dc0bc101"/> <link rel="canonical" href="http://www.yegor256.com/2014/05/13/why-null-is-bad.html" itemprop="url" /> <link rel="amphtml" href="http://www.yegor256.com/2014/05/13/why-null-is-bad.amp.html" /> <title>Why NULL is Bad? </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html"> <img src="//cf.jare.io/?u=http://www.yegor256.com/images/yegor-bugayenko-192x192.png" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" re="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://gitter.im/yegor256/elegantobjects" rel="nofollow" title="Our OOP Gitter chat"><i class="icon icon-gitter notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li><a href="/contents.html" title="The contents of the entire blog">All&#160;247</a></li> <li><a href="/webinars.html" title="My webinars">Webinars</a></li> <li><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li><a href="/books.html" title="The books I wrote">Books</a></li> <li><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li><a href="/award.html" title="Software quality award">Award</a></li> <li><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li class="highlighted"><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> You can get <a href="/elegant-objects.html#stickers">cactus stickers</a> for your laptop, just by writing an honest five-stars review on Amazon for Elegant Objects; I will mail them to you free of charge. </li> <li> At <a href="/webinars.html">Webinar #28</a> we'll create a fully functional web app in just one hour, keeping all the best principles of object-oriented programming in mind (ThreeCopies.com); join us on <b>September 13</b> (re-scheduled!), at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="review" itemscope="" itemtype="http://schema.org/Review"> <meta itemprop="author" content="Yegor Bugayenko"> <meta itemprop="itemReviewed" content="http://www.yegor256.com/2014/05/13/why-null-is-bad.html"><div itemprop="reviewRating" itemscope="" itemtype="http://schema.org/Rating"> <meta itemprop="ratingValue" content="9"/> <meta itemprop="bestRating" content="10"/></div></div><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=http://www.yegor256.com/2014/05/13/why-null-is-bad.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">http://www.yegor256.com/2014/05/13/why-null-is-bad.html</code></p><h1 itemprop="name headline mainEntityOfPage">Why NULL is Bad?</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;2.6</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-05-13T00:00:00+00:00"> 13 May 2014 </time> </li> <li class='unprintable desktop-only'><a href='https://github.com/yegor256/blog/commits/master/_posts/2014/may/2014-05-13-why-null-is-bad.md'>Modified</a> on <time itemprop='dateModified' datetime='2017-05-14T12:53:59+0300'>14 May 2017</time></li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/13/why-null-is-bad.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="unprintable subline"> <li>Translated:</li> <li><a href="http://tbd.kaitoy.xyz/2015/07/26/why-null-is-bad/">Japanese</a></li> <li><a href="mailto:translate@yegor256.com">add yours!</a></li></ul><p class="unprintable"><a href='/tag/oop.html' class='tag notranslate'><img src='/images/books/elegant-objects/cactus.svg' alt='OOP'/>oop</a></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2014/05/13/why-null-is-bad.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2014/05/13/why-null-is-bad.html&amp;text=Why+NULL+is+Bad%3F" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2014/05/13/why-null-is-bad.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2014/05/13/why-null-is-bad.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2014/05/13/why-null-is-bad.html&amp;title=Why+NULL+is+Bad%3F" title="Share on StumbleUpon" class="button" rel="nofollow"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2014/05/13/why-null-is-bad.html%3F2014-19&amp;title=Why+NULL+is+Bad%3F" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2014/05/13/why-null-is-bad.html%3F2014-19&amp;t=Why+NULL+is+Bad%3F" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <main> <article class="main" itemprop="articleBody"><div ><p>A simple example of <code>NULL</code> usage in Java:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>What is wrong with this method?</p><p>It may return <code>NULL</code> instead of an object&mdash;that&#39;s what is wrong. <code>NULL</code> is a terrible practice in an object-oriented paradigm and should be avoided at <a href="/2016/03/22/try-finally-if-not-null.html">all costs</a>. There have been a number of opinions about this published already, including <a href="http://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare">Null References, The Billion Dollar Mistake</a> presentation by Tony Hoare and the entire <a href="http://amzn.to/266oJr4">Object Thinking</a> book by David West.</p><p>Here, I&#39;ll try to summarize all the arguments and show examples of how <code>NULL</code> usage can be avoided and replaced with proper object-oriented constructs.</p><p>Basically, there are two possible alternatives to <code>NULL</code>.</p><p>The first one is <strong><a href="http://en.wikipedia.org/wiki/Null_Object_pattern">Null Object</a></strong> design <a href="/2016/02/03/design-patterns-and-anti-patterns.html">pattern</a> (the best way is to make it a constant):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Employee</span><span class="o">.</span><span class="na">NOBODY</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>The second possible alternative is to <a href="/2015/08/25/fail-fast.html">fail fast</a> by throwing an <strong>Exception</strong> when you can&#39;t return an <a href="/2016/07/14/who-is-object.html">object</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Now, let&#39;s see the arguments against <code>NULL</code>.</p><p>Besides Tony Hoare&#39;s presentation and David West&#39;s book mentioned above, I read these publications before writing this post: <a href="http://www.amazon.com/dp/0132350882/">Clean Code</a> by Robert Martin, <a href="http://www.amazon.com/dp/0735619670/">Code Complete</a> by Steve McConnell, <a href="http://elegantcode.com/2010/05/01/say-no-to-null/">Say &quot;No&quot; to &quot;Null&quot;</a> by John Sonmez, <a href="http://stackoverflow.com/questions/1274792/is-returning-null-bad-design">Is returning null bad design?</a> discussion at StackOverflow.</p><h2 id="ad-hoc-error-handling">Ad-hoc Error Handling</h2><p>Every time you get an object as an input you must check whether it is <code>NULL</code> or a valid object reference. If you forget to check, a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html"><code>NullPointerException</code></a> (NPE) may break execution in runtime. Thus, your logic becomes polluted with multiple checks and if/then/else forks:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="c1">// this is a terrible design, don&#39;t reuse</span>
<span class="n">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="n">dept</span><span class="o">.</span><span class="na">getByName</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">employee</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;can&#39;t find an employee&quot;</span><span class="o">);</span>
  <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
  <span class="n">employee</span><span class="o">.</span><span class="na">transferTo</span><span class="o">(</span><span class="n">dept2</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>This is how exceptional situations are supposed to be handled in <a href="http://en.wikipedia.org/wiki/C_%28programming_language%29">C</a> and other imperative procedural languages. OOP introduced <a href="http://en.wikipedia.org/wiki/Exception_handling">exception handling</a> primarily to get rid of these ad-hoc error handling blocks. In OOP, we let exceptions bubble up until they reach an application-wide error handler and our code becomes much cleaner and shorter:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">dept</span><span class="o">.</span><span class="na">getByName</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">).</span><span class="na">transferTo</span><span class="o">(</span><span class="n">dept2</span><span class="o">);</span></code></pre></figure><p>Consider <code>NULL</code> references an inheritance of procedural programming, and use 1) Null Objects or 2) Exceptions instead.</p><h2 id="ambiguous-semantic">Ambiguous Semantic</h2><p>In order to explicitly convey its meaning, the function <code>getByName()</code> has to be named <code>getByNameOrNullIfNotFound()</code>. The same should happen with every function that returns an object or <code>NULL</code>. Otherwise, ambiguity is inevitable for a code reader. Thus, to keep semantic unambiguous, you should give longer names to functions.</p><p>To get rid of this ambiguity, always return a real object, a null object or <a href="/2015/12/01/rethrow-exceptions.html">throw</a> an exception.</p><p>Some may argue that we sometimes have to return <code>NULL</code>, for the sake of performance. For example, method <code>get()</code> of interface <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html"><code>Map</code></a> in Java returns <code>NULL</code> when there is no such item in the map:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="n">employees</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">employee</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">();</span>
<span class="o">}</span>
<span class="k">return</span> <span class="n">employee</span><span class="o">;</span></code></pre></figure><p>This code searches the map only once due to the usage of <code>NULL</code> in <code>Map</code>. If we would refactor <code>Map</code> so that its method <code>get()</code> will throw an exception if nothing is found, our code will look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(!</span><span class="n">employees</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">))</span> <span class="o">{</span> <span class="c1">// first search</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">();</span>
<span class="o">}</span>
<span class="k">return</span> <span class="n">employees</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span> <span class="c1">// second search</span></code></pre></figure><p>Obviously, this is method is twice as slow as the first one. What to do?</p><p>The <code>Map</code> interface (no offense to its authors) has a design flaw. Its method <code>get()</code> should have been returning an <a href="/2015/04/30/iterating-adapter.html"><code>Iterator</code></a> so that our code would look like:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Iterator</span> <span class="n">found</span> <span class="o">=</span> <span class="n">Map</span><span class="o">.</span><span class="na">search</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(!</span><span class="n">found</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">();</span>
<span class="o">}</span>
<span class="k">return</span> <span class="n">found</span><span class="o">.</span><span class="na">next</span><span class="o">();</span></code></pre></figure><p>BTW, that is exactly how C++ STL <a href="http://en.cppreference.com/w/cpp/container/map/find">map::find()</a> method is designed.</p><h2 id="computer-thinking-vs-object-thinking">Computer Thinking vs. Object Thinking</h2><p>Statement <code>if (employee == null)</code> is understood by someone who knows that an object in Java is a pointer to a data structure and that <code>NULL</code> is a pointer to nothing (<code>0x00000000</code>, in Intel x86 processors).</p><p>However, if you start thinking as an object, this statement makes much less sense. This is how our code looks from an object point of view:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>- Hello, is it a software department?
- Yes.
- Let me talk to your employee &quot;Jeffrey&quot; please.
- Hold the line please...
- Hello.
- Are you NULL?</code></pre></figure><p>The last question in this conversation sounds weird, doesn&#39;t it?</p><p>Instead, if they hang up the phone after our request to speak to Jeffrey, that causes a problem for us (Exception). At that point, we try to call again or inform our supervisor that we can&#39;t reach Jeffrey and complete a bigger transaction.</p><p>Alternatively, they may let us speak to another person, who is not Jeffrey, but who can help with most of our questions or refuse to help if we need something &quot;Jeffrey specific&quot; (Null Object).</p><h2 id="slow-failing">Slow Failing</h2><p>Instead of <a href="http://martinfowler.com/ieeeSoftware/failFast.pdf">failing fast</a>, the code above attempts to die slowly, killing others on its way. Instead of letting everyone know that something went wrong and that an exception handling should start immediately, it is hiding this failure from its client.</p><p>This argument is close to the &quot;ad-hoc error handling&quot; discussed above.</p><p>It is a good practice to make your code as fragile as possible, letting it break when necessary.</p><p>Make your methods extremely demanding as to the data they manipulate. Let them complain by throwing exceptions, if the provided data provided is not sufficient or simply doesn&#39;t fit with the main usage scenario of the method.</p><p>Otherwise, return a Null Object, that exposes some common behavior and throws exceptions on all other calls:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="n">Employee</span> <span class="n">employee</span><span class="o">;</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">employee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">()</span> <span class="o">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="n">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;anonymous&quot;</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">transferTo</span><span class="o">(</span><span class="n">Department</span> <span class="n">dept</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">AnonymousEmployeeException</span><span class="o">(</span>
          <span class="s">&quot;I can&#39;t be transferred, I&#39;m anonymous&quot;</span>
        <span class="o">);</span>
      <span class="o">}</span>
    <span class="o">};</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">employee</span> <span class="o">=</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">employee</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure><h2 id="mutable-and-incomplete-objects">Mutable and Incomplete Objects</h2><p>In general, it is <a href="/2014/06/09/objects-should-be-immutable.html">highly recommended</a> to design objects with immutability in mind. This means that an object gets all necessary knowledge during its instantiating and never changes its state during the entire life-cycle.</p><p>Very often, <code>NULL</code> values are used in <a href="http://en.wikipedia.org/wiki/Lazy_loading">lazy loading</a>, to make objects incomplete and mutable. For example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Department</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Employee</span> <span class="n">found</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">Employee</span> <span class="nf">manager</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">found</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">found</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">found</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This technology, although widely used, is an anti-pattern in <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a>. Mostly because it makes an object responsible for performance problems of the computational platform, which is something an <code>Employee</code> object should not be aware of.</p><p>Instead of managing a state and exposing its business-relevant behavior, an object has to take care of the caching of its own results&mdash;this is what lazy loading is about.</p><p>Caching is not something an employee does in the office, does he?</p><p>The solution? Don&#39;t use lazy loading in such a primitive way, as in the example above. Instead, move this caching problem to another layer of your application.</p><p>For example, in Java, you can use aspect-oriented programming aspects. For example, <a href="http://aspects.jcabi.com">jcabi-aspects</a> has <a href="http://aspects.jcabi.com/annotation-cacheable.html"><code>@Cacheable</code></a> annotation that caches the value returned by a method:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">com.jcabi.aspects.Cacheable</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Department</span> <span class="o">{</span>
  <span class="nd">@Cacheable</span><span class="o">(</span><span class="n">forever</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">Employee</span> <span class="nf">manager</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="s">&quot;Jacky Brown&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I hope this analysis was convincing enough that you will stop <code>NULL</code>-ing your code :)</p></div></article> </main></div><div class="wrapper"><div class="youtube"><ul><li><a href='https://www.youtube.com/watch?v=o3aNJX7AP3M'><img src='https://i.ytimg.com/vi/o3aNJX7AP3M/mqdefault.jpg'/></a>What is Wrong About NULL in OOP? (webinar #3); 3 June 2015; 2966 views; 33 likes</li></ul></div></div><div class="wrapper"> 
  <div class="unprintable">
    <hr/>
    <p>
      You may also find these <strong>related</strong> posts interesting:
      
        <a href="/2016/02/03/design-patterns-and-anti-patterns.html" data-score="2.8884640838267126">Design Patterns and Anti-Patterns, Love and Hate</a>;
      
        <a href="/2015/04/16/award.html" data-score="2.4950850818356427">Software Quality Award, 2015</a>;
      
        <a href="/2017/06/22/object-oriented-input-output-in-cactoos.html" data-score="1.98861168951943">Object-Oriented Declarative Input/Output in Cactoos</a>;
      
        <a href="/2017/07/25/my-favorite-websites.html" data-score="1.4396792099972346">My Favorite Websites</a>;
      
        <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html" data-score="1.331726289318237">What's Wrong With Object-Oriented Programming?</a>;
      
    </p>
  </div>

</div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/customer/portal/articles/665057-syntax-highlighting">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0]; this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2017</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="http://www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?19dc0bc101"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script language="javascript" type="text/javascript"> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script language="javascript1.1" type="text/javascript"> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script language="javascript1.2" type="text/javascript"> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script language="javascript" type="text/javascript"> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> </body> </html>
